{"key":"SHOW_PDFTESTER__RESULTS","source":"\nf = '/Users/rainerg/work/ideals/pdftest/input_pdfs2_result/result.json';\n\njj = jetpack.read(f, 'json')\nsizeOf = require('image-size');\n\n\nout = jj\n  .map(d=>d.difference.map((p,i)=>{\n  let pwh = sizeOf(d.pdfConv.pages[i]);\n  let ewh = sizeOf(d.etalon.pages[i]);\n  \n  return [d.pdf_file_name\n          + (new Array(20 - (d.pdf_file_name + '').length)).join(' ')\n          + 'p'+(1+i),\n          p.misMatchPercentage, p.analysisTime\n          , (pwh.width == ewh.width)?'':'diff width'\n          , (pwh.height == ewh.height)?'':'diff height'\n          //,'x'+pwh.width +'\\tx'+ewh.width +'\\n'\n          //+(new Array(41)).join(' ')\n          //+'y'+pwh.height+'\\ty'+ewh.height\n         ]}\n                          ))\n//arr = {};\n//arr[f] =\n out.map(d=>d.map(v=>v.join('\\t')).join('\\n')).join('\\n');\n\n//_.pairs(arr).map(v=>'\\n'+v.join('\\n')).join('\\n')\n","md5":"065ba5dc578efb048e4c225c148c24ef","system":"solar","isFunc":false,"_id":"0P5Ao0d8fkjCxlcp"}
{"key":"toolbar_setup","source":"PrimaryDisplay = require('electron').screen.getPrimaryDisplay()\ntw = giveWin('toolbar')\n  tw.move(PrimaryDisplay.bounds.width - 63, 25);\n  tw.object.setSize(60,423)\n\n","md5":"c4be6d4f07fafdabb1509d223bb0e712","system":"solar","isFunc":false,"_id":"28nRUYYIrngVej3D"}
{"key":"PDF_BLOCKS_READER","source":"_s = require(\"underscore.string\");\np_r = '/Users/rainerg/work/ideals/pdf_testA/output/root.blocks';\np_t = '/Users/rainerg/work/ideals/pdf_testA/output/texts.blocks';\np_p1 = '/Users/rainerg/work/ideals/pdf_testA/output/page1.blocks';\n\np_bl = \"/Users/rainerg/work/ideals/_BLOCKS/input_pdfs/texts_a1.blocks\";\np_rl = \"/Users/rainerg/work/ideals/_BLOCKS/input_pdfs/root.blocks\";\np_bl = \"/Users/rainerg/work/ideals/_BLOCKS_blocks_results/2011-D3-InfoVis/texts.blocks\";\n\n\nstr_view = require('pdftest/pdf-converter/js/stringview-module')\nbin_to_mem = require('pdftest/pdf-converter/js/binary-to-mem-module')\n\nfunction unpackBlocks(source) {\n    var blocks = [];\n    var dataView = new DataView(source);\n    var sourceLen = source.byteLength;\n    var pos = 0;\n    while (pos<sourceLen) {\n        var blockLen = dataView.getUint32(pos);\n        pos += 4;\n        blocks.push(source.slice(pos,pos+blockLen));\n        pos += blockLen;\n    }\n    return blocks;\n}\n\nrb = fs.readFileSync(p_bl);\n\n//aa = bin_to_mem.binaryToRoot(rb.buffer)\naa = bin_to_mem.binaryToTexts(rb.buffer)\n//a1 = aa.slice(0,10)\n//ii=0;\n//o = aa.map(({id,page,idx,t,str},i)=>({i:ii++,id,page,idx,str}))\n//colf(o)\naa[2]\n//a1\n//ss = String(rb);\n//sss = unpackBlocks(rb.buffer)\n\n//tb0=Buffer.from(sss[0]).toString()\n\n//sv = (new str_view.StringView(sss[1])).toString();\n\n\n\n//_s.chop(sv, 80).join('\\n')\n//;[sv.length, ss.length]\n//jetpack.list('node_modules')\n//JSON.parse(sv)\n//rrr = fs.readFileSync(p_t);\n//pos = 4+rrr.readUInt32BE(0)\n//sbb = rrr.slice(pos+4,pos+rrr.readUInt32BE(pos))\n\n//sbb\n//String(sbb)\n//JSON.parse(String(tb0))\n\n//nrb = new str_view.StringView(rrr);\n//aa\n//'dd'\n//nrb.toString()\n//_s.chop(rrr, 80).join('\\n')\n//rbb = Buffer.from(rrr,'utf8');\n//rrr.toString('utf)","md5":"5772d6f9805b43f1c74cdc67ffb1974d","system":"solar","isFunc":false,"_id":"2U3Yo6JvjsupUb3l"}
{"key":"LIST_OF_LOCALSTORAGE_KNOWS","source":"isresultHTML = true;\njk = JSON.parse(localStorage.Knows)//.slice(0,3)\n  .map((v,i)=>({i,v}))\n  .filter(v=>v.v&&v.v.sourceText)\n  .map(({v,i})=>({i,v:v.sourceText.split('\\n').map(s=>'\\t'+_.escape(s)).join('\\n')}))\n  .map(({v,i})=>'<h3 style=\"color:yellow;margin:0;\">- '+i+' - </h3>'+v)\n\n//colf(jk)\njk.join('\\n')//\\n//------\\n')","md5":"3d0a1bebdbcf5eae93682ab834806b28","system":"solar","isFunc":false,"_id":"2ji8YONo2XlGr0LS"}
{"key":"VK_audio_magic","source":"\nlet vk_audios_url = 'https://vk.com/audios140858552';\nlet winName = 'bro_vk_audios';\n\nlet [width, heigth] = [350,400];\n\ncreateBro = (name, url)=>{\n  let win = windowManager.get(name) || \n      windowManager.createNew(name, 'Bro', url, 'bro');\n  win.open();\n  return win;\n}\n\nflashWindow = (w)=>{\n  w.setAlwaysOnTop(true);\n  w.setVisibleOnAllWorkspaces(true);\n  //w.focus();\n  w.setAlwaysOnTop(false);\n  w.setVisibleOnAllWorkspaces(false); \n}\n\nvar w = createBro(winName, vk_audios_url).object;\n//w.loadURL(vk_audios_url);\nflashWindow(w);\nw.setSize(width, heigth);\nw.webContents.once('did-finish-load', ()=> {\n  let opt = {\n    screenPosition: 'mobile',\n    viewSize: {width:600},\n    offset: {x: -100, y: 0}\n  };\n  w.webContents.enableDeviceEmulation(opt);\n  let css = `#_yoba{\nbackground: #305075; width: 100%; height: 40px;\nposition: fixed; z-index: 1000;\ntop: -5px; -webkit-app-region: drag;}\n\n\n\n`\n/*\n`   \n  #page_body {width: auto !important;}\n._audio_page_player_wrap {width: 795px !important;}\n.audio_page_player__cover {display:none;}\n.audio_page_player {width: auto !important;}\n.audio_page_player_btns {width: 70px;}\n.audio_page_player_btn {zoom: 0.67; padding: 0 !important;}\n.audio_page_player_title {font-size: 15.5px;line-height: 1em;}\n\n.audio_page_layout .has_friends_block .audio_page__rows_wrap {\n    width:755px !important;\n}\n\n.audio_friends_list_wrap._audio_friends_list_wrap {\n    position: absolute;\n    left: 800px;\n}\n \n\n`\n/**/\n  \n  w.webContents.insertCSS(css);\n  let code = `\nif(!document.getElementById('_yoba')){\nlet yoba = document.createElement('div');yoba.id = '_yoba';\ndocument.body.insertBefore(yoba, document.body.children[0]);}`;\n  w.webContents.executeJavaScript(code);\n});\n\n//add MEDIA PLAY/PAUSE key hook;\n//*\nlet vk_playPause = () => {\n  let code = `document.querySelector('.audio_page_player_ctrl.audio_page_player_play').click();`;\n  flashWindow(w);\n  if(w) w.webContents.executeJavaScript(code);\n}\nremote.globalShortcut.unregister('MediaPlayPause');\nremote.globalShortcut.register('MediaPlayPause', vk_playPause);\n\nlet vk_playPrev = () => {\n  let code = `getAudioPlayer().playPrev();`;\n  flashWindow(w);\n  if(w) w.webContents.executeJavaScript(code);\n}\nremote.globalShortcut.unregister('MediaPreviousTrack');\nremote.globalShortcut.register('MediaPreviousTrack', vk_playPrev);\n\nlet vk_playNext = () => {\n  let code = `getAudioPlayer().playNext();`;\n  flashWindow(w);\n  if(w) w.webContents.executeJavaScript(code);\n}\nremote.globalShortcut.unregister('MediaNextTrack');\nremote.globalShortcut.register('MediaNextTrack', vk_playNext);\n\n/**/\n'w'","md5":"86c460f8904d3e7d06b0345f51177574","system":"solar","isFunc":false,"_id":"3kb2yUGQIrASwfMk"}
{"key":"WATCH_QUANT","source":"\nlet [mw,mh] = [50,60]//getWin('matrix1_view').object.getPosition();\nlet q = windowManager.sharedData.fetch('quants')[0];\nlet k = 10, l = 30;\n\ncw.setPosition(l+mw+q.x*k, 20+l+mh+q.y*k)\n\nq","md5":"6981706ca4349774d7f1edc77bbe4d57","system":"solar","isFunc":false,"_id":"4cOy4kbMQik0sQeo"}
{"key":"matrix1_view","source":"cw.setBounds({\"x\": 5,\"y\": 30, \"width\": 600, \"height\": 350}, true);\ncw.setAlwaysOnTop(!true)\n\nquants = windowManager.sharedData.fetch('quants');\nqmt = quants.map((v)=>v.join('\\t')).join('\\n')\ntxt = '<pre>' + qmt + '</pre>'\nsetContent(txt)\n","md5":"bf4cac69bd715c3fa784379a8b5a3bbf","system":"solar","isFunc":false,"_id":"5hQhWK6GvUZINy8E"}
{"key":"TILE_ALL_WINDOWS","source":"\nexw = [windowManager.getCurrent().name, \"ALL_WINDOW_SCROLL\", \"codeList\", \"showCodeList\", \"toolbar\", \"listknows\", \"showTime\", \"fulloverlay\"];\n\nwarr = _(remote.getGlobal('getAllWin')())\n  .chain()\n  .filter(w=>!exw.includes(w))\n  .map(w=>windowManager.get(w))\n  .filter(w=>!w.object.isAlwaysOnTop())\n  .sortBy(w=>w.object.id)\n  .value()\n\nчисло = 20;\n\nsss = 20;\n_x = 0;\nres = warr.map(function(wm,i){\n  //let [wx,wy] = w.object.getPosition();\n  //alert(w.name + i)\n  let w = wm.object;\n  let H = w.getSize()[1];\n  let top = w.isAlwaysOnTop();\n  \n  let Y = 10+sss;\n  let X = 760*_x;\n  let M = ( (H+sss) /900|0) ;\n  ret = [_x,sss,H,M];\n  if(H>1000){\n    _x++;\n    sss = 20;\n  }else if(M > 0 ){\n    //ret = [_x,sss];\n    _x++;\n    sss = 20;\n  }else{\n    sss += 90+H;\n  }\n  i++;\n  w.setAlwaysOnTop(true);\n  w.setVisibleOnAllWorkspaces(true);\n  w.focus();\n  w.webContents.executeJavaScript('justScale(1)')\n  w.setPosition(X,Y,!true);\n  w.setAlwaysOnTop(top);\n  w.setVisibleOnAllWorkspaces(false);\n  return [ret,wm.name,w.getSize()[1]].join('  ');\n})\ncw.focus();\nres\n//justScale(.9)","md5":"60a408defec4a8b55011955c44ea6e03","system":"solar","isFunc":false,"_id":"7kTuw6dnJFTzp0XQ"}
{"key":"TEST_OPENCV","source":"\ncv = require('opencv');\n\n\n// var bp = '/Users/rainerg/work/ideals/pdftest/input_pdfs_result/';\n// var bp = '/Users/rainerg/work/ideals/pdftest/input_pdfs_result/';\n//var bp = '/Users/rainerg/work/ideals/pdftest/input_pdfs2_result/';\n// var bp = '/Users/rainerg/work/ideals/pdftest/input_pdfs_result_copy/';\nvar bp = '/Users/rainerg/work/ideals/pdftest/test_pdfs_22_result/';\n\n//var p = 'Fundamentals of Nuclear Science & Engineering';\n// var p = 'freeculture';\n// var p = '2011-D3-InfoVis';\nvar p = 'basicapi';\n// var p = 'bug852992_reduced';\nimg = 'page-001.png';\ncv.readImage(bp + p + \"/etalonConv/\" + img, function (err, car1) {\n  if (err) throw err;\n  cv.readImage(bp + p + \"/pdfConv/\" + img, function (err, car2) {\n    if (err) throw err;\n    // console.log('qwertyy');\n    let in_startTime = Date.now();\n    cv.ImageSimilarity(car1, car2, function (err, dissimilarity) {\n      if (err) throw err;\n      let in_time = Date.now() - in_startTime;\n\n      justShowResult([p + '/' + img, \n                      dissimilarity, \n                      //new Array(30 - (dissimilarity + '').length).join(' '), \n                      in_time].join('  '));\n    });\n\n  });\n\n});\n\n","md5":"2d483a3840c178de20b8d419fd2486f0","system":"solar","isFunc":false,"_id":"7wzLWdr3sWApeqZx"}
{"key":"localStorageUnderscorePrint","source":"\n\narr = _.chain(localStorage).mapObject(d=>JSON.parse(d))\n  .map((d,k)=>[k,_.pluck(d,'sourceText')]).flatten().compact().uniq().value()//.length\n  //.values().flatten().pluck('sourceText').uniq().value()//.length\narr.map((d,k)=>`<h1>---${k}------------------------------------------</h1> \n\\n <pre>${_.escape(d)}</pre>`).join('\\n')","md5":"cb2c3fc56fb8e0de4b8a53d24c231c1c","system":"solar","isFunc":false,"_id":"87b5M8LyTq8FaTmN"}
{"key":"testCode_parse_filedb","source":"harb = require('harb')\n\ndocPath = require('electron').remote.app.getPath('documents');\n\nstr = jetpack.read(path.resolve(docPath,'www3.dif'));\n\nsheet = harb.read(str)\ndata = sheet.Sheets.Sheet1;\n\nbox = data['!ref'].match(/[[A-Z]+|\\d+|:]/g)\n  .map(v=>[v,parseInt(v)||parseInt(v,36)-9]);\ndelete data['!ref'];\n\nout = Object.keys(data)\n  .map(k=>[k,data[k]])\n  .map(([k,{v,t}])=>({k,v,t}))\n  .reduce((m,{k,v,t})=>{\n    m.push({k,v,t})\n  return m;\n},[])\n\n//s = box\n//colf(out)\n\n","md5":"87a7584d1042db7d1b8603f6024db3b6","system":"solar","isFunc":false,"_id":"8JrnFwYigkY8wjza"}
{"key":"gavnocod","source":"\nd = ' ∆ '\nwwe = 11\ntxt0 = _(windowManager.windows).chain()\n  .filter(function(v){return 'editor_' == v.name.substr(0,7)})\n  .map(function(v){\n  \t//v.reload(true)\n    //v.object.send('justScrollAll')\n  \treturn v.object.id+' '+v.name\n\t})\n  .value()\n_(JSON.parse(localStorage.Knows)).pluck('sourceText')\n\nq = !(typeof q == 'boolean') || !q\ngetWin(just.name).object.setIgnoreMouseEvents(q)\ntxt = `<code>TEST 1\n<br/>\n<pre>${van_dump(txt0)}</pre>\n</code><br/>\n<pre>${van_dump(Object.keys(cw))}</pre>\ndf`;\ngetWin(just.name).execute('setContent(`'+txt+'`)')\n\nwwidth = 250\ngetWin(just.name).object.setPosition(screen.width-wwidth, 0)\ngetWin(just.name).object.setSize(wwidth, screen.height)\n\n//JSON.parse(localStorage.Knows)[14].sourceText\nMatrix.getDb().getAllData()\n1\n\ntableify = require('tableify');\n\ndata = Matrix.getDb().getAllData()\ntableify(data)\n\n\n","md5":"d0bbe37dd53b09c55de39da81617b8ec","system":"solar","isFunc":false,"_id":"9r8EhcUvsR37IJKp"}
{"key":"A_POST_Rxlab","source":"\ngot = require('got');\n//id = 0;\nsrc = clipboard.readText();\nid = 'theF2'//md5(src)\nurl = \"http://lab.rainerg.net/php-crud-api/api.php/simple/\";\na = {\n  id,\n  name:'MAIN_READCodefor_aspirin',\n  value: src\n};\n\n//got.get(url)\n//got.put\n//got.delete\ngot.post(url,{body:a, json:true})\n.then(r=>r.body)\n.then(JSON.parse)\n.then(van_dump)\n.then(justShowResult)\n","md5":"42cfd919d8b5c058e5fee57eb580f656","system":"solar","isFunc":false,"_id":"AOTJ6h0WhLJgJU1g"}
{"key":"CONVERTER_SAMPLE","source":"colf = require('columnify');\nconverter = require('converter');\nconverter.require_clear()\nconverter.require_clear('./api')\n//pfile = \"/Users/rainerg/work/ideals/_TESTFILES/prod_test/1033251.pdf\";\npfile = \"/Users/rainerg/work/ideals/5000_pdfs/1033251.pdf\";\npdir =  \"/Users/rainerg/work/ideals/5000_pdfs\";\n\npdf_list = jetpack.list(pdir)\n  .filter(file=>path.extname(file) === '.pdf')\n  .map(file=>path.resolve(pdir, file))\n  .map(converter.api.getMetadata)\n\nPromise.all(pdf_list).then(res=>{\n  jLog(res)\n})\n'111'\n\n\n\n\n\n","md5":"6585b1cbbcddbb8c48da041eb008cd54","system":"solar","isFunc":false,"_id":"DgswctwB70tRTDnR"}
{"key":"promise_sample","source":"text = '';\ncbks = [];\ni = 0;\ncli = 0;\nclickfunc = (ii)=>cbks[ii](cli++)\ncrtBtn = (nm,cb)=>{\n  text +=` -<button \nclass=\"btn btn-mini btn-default\" \nonclick=\"clickfunc(${i})\">\n<span class=\"icon icon-text\">${nm}</span>\n<span class=\"icon icon-code\"></span>\n\n</button>-` ;\n  cbks[i++]=cb;\n}\n\nvar p3 = new Promise(function(resolve, reject) { \n  crtBtn('A',(ii)=>resolve([ii, 'A']))\n});\n\nvar p4 = new Promise(function(resolve, reject) { \n  crtBtn('B',(ii)=>resolve([ii, 'B']))\n});\n\nvar p5 = new Promise(function(resolve, reject) { \n  crtBtn('C',(ii)=>resolve([ii, 'C']))\n});\nvar p6 = new Promise(function(resolve, reject) { \n  crtBtn('D',(ii)=>resolve([ii, 'D']))\n});\n\nnew Promise((resolve, reject)=> { \n\n  Promise.all([p3, p4, p5, p6])\n    .then(val=>val.sort().map(v=>v[1]))\n    .then(value=> resolve('success: ' + value))\n    .catch(reason=> resolve('fail: ' + reason) )\n\n})\n  .then((v)=>jLog('s-'+v))\n  .catch((v)=>jLog('f-'+v))\n\n\nisresultHTML = true;\n//sss\ntext\n\n","md5":"004019059b941c77902258fe3d31580c","system":"solar","isFunc":false,"_id":"EDLkWCfg6PoVkRQl"}
{"key":"nedb_sample","source":"doc1 = { key: 'firstCode', source: '\"000Mars2\"', system: 'solar', isFunc: false }\n\ndoc2 = { hello: 'world'\n               , n: 5\n               , _id: \"id89\"\n               , today: new Date()\n               , nedbIsAwesome: true\n               , notthere: null\n               , notToBeSaved: undefined  // Will not be saved\n               , fruits: [ 'apple', 'orange', 'pear' ]\n               , infos: { name: 'nedb' }\n               };\n\n\nmdb = Matrix.getDb()\nk = {key: doc1.key}\nmdb.update(k, doc1, {upsert: true});\n//mdb.insert(doc1);\nMatrix.save","md5":"28f6e5f965074e9266eae62b9de43a4d","system":"solar","isFunc":false,"_id":"F3rQBsJl7iN3ZlwN"}
{"key":"timeout_test","source":"\ntimeout = 50\nb = a\n\na = new Date().getTime()\n\na - b\n\n\n","md5":"8c6094465bbb15eb95fe7f21c9580724","system":"solar","isFunc":false,"_id":"FobSmVxQjaRCTyRV"}
{"key":"але_гараж","source":"\nале гараж?!\n  \n<h1 style=\"background:blue;color:#111\"\nclass=\"red\" onclick=\"window.CHAT_HANDLER = (data, socket)=>{eval(data, true);socket.emit('msg', 'ok: '+data.length);};alert('ЕБАТЬ');alert('ТЫ');alert('ЛОХ!!!')\">\n  АЛЕ НАЖМИ МЕНЯ ЕСЛИ НЕ ЛОХ\n</h1>\n","md5":"7606c78138dcc2e531db6033dff614fa","system":"solar","isFunc":false,"_id":"FyIknZzgAlhrAGnE"}
{"key":"matrix1","source":"cw.setBounds({\"x\": 1030,\"y\": 30, \"width\": 400, \"height\": 350}, true);\ncw.setAlwaysOnTop(true)\ntpl = jade.compileFile('./matrix/tpl.jade');\ntxt = tpl({name:'matrix_test_1'})\nsetContent(txt)\n\nif(typeof quants === 'undefined')quants = [];\n\n\nmatrize = qv => qv.map(v=>v.join('\\t')).join('\\n')\n\n\n\npreout = document.getElementById('preout');\n\nm = 0\nn = 0\nz = 0\nquants = []\n  \nstartrun = function(){\n  quants[m] = quants[m] || []\n  quants[m][z++] = n++;\n  \n   \n  if(0 == (z = z%5)) m++;\n  m=m%5;\n  windowManager.sharedData.set('quants', quants);\n\n  preout.innerHTML = matrize(quants);\n}\n\nif(typeof onlyOneLoop === 'undefined')onlyOneLoop = false;\n\nclrint = function(){\n  clearInterval(onlyOneLoop);\n}\nclrint();\nreset = function(){\n  \n  m = 0\n  n = 0\n  z = 0\n  quants = []\n}\nsettmr = function(){\n  tme = document.getElementById('mtimeout').selectedOptions[0].value;\n  clearInterval(onlyOneLoop);\n  onlyOneLoop = setInterval(startrun,tme);\n}\n//settmr();\nstartrun()\ndocument.getElementById('mreload').onclick = reset;\ndocument.getElementById('mrun').onclick = settmr;\ndocument.getElementById('mstep').onclick = startrun;\ndocument.getElementById('mpause').onclick = clrint;","md5":"692e6f5f5d724e61e0f67ac2907d4876","system":"solar","isFunc":false,"_id":"GTFcEpkBNEdzyjpn"}
{"key":"tableify_sample","source":"\ntableify = require('tableify');\n\ndata = Matrix.getDb().getAllData()\ntableify(data)\n","md5":"0373057362482bdd2713f87409a5f1aa","system":"solar","isFunc":false,"_id":"HseDOLx4v6n4aukt"}
{"key":"split_xNNyNNv1","source":"\nfns = ['x10y5','x5y5','x33','y22','x00','0x0','0y0']\n\n\nfns.map(fname=>{\n  var xy = fname.split('y');\n  var obj = {};\n  xy[0] = xy[0].substr(1);\n  if(xy[0]) obj.x = xy[0]*1;\n  if(xy[1]) obj.y = xy[1]*1;\n  return obj\n})\n","md5":"015c24e1ffd5b5bb567c3a6b179165ab","system":"solar","isFunc":false,"_id":"INyrPq1dnwXCg1H8"}
{"key":"using_ES6arrowFunction","source":"s = 0\n\"use strict\";\n\ns = (i) => i*2\n\ns(3)","md5":"fe237dbd6929efcc5f47131465560bfa","system":"solar","isFunc":false,"_id":"IxgNOjJJt5KbhGLK"}
{"key":"reload_M_database","source":"\nKnows.getDb().loadDatabase()\nMatrix.getDb().loadDatabase()\n","md5":"3fc05b0c892d4225386b8e7836c18564","system":"solar","isFunc":false,"_id":"IyzORoR4f8WW4ETp"}
{"key":"localStorage_uniq_functions","source":"testCode = (src)=>{\n  let out = false;\n  let fn\n  try {\n    if(fn = new Function('dat',src))\n      out = src\n      } catch (e) {\n        //[e.name,e.message]\n        out = '_txt=`'+src+'`'\n      }\n  return out\n}\n\narr = _.chain(localStorage).mapObject(d=>JSON.parse(d))\n  .map((d,k)=>_.pluck(d,'sourceText').map((v,i)=>[k,i,v]))\n  .flatten(1).uniq(d=>d[2])\n  .value()//.length\n  //.values().flatten().pluck('sourceText').uniq().value()//.length\nres = arr.map((d)=>`exports.${d[0]}_${d[1]} = function (){ \n  ${testCode(d[2])}\n}`).join('\\n')\n\njetpack.write('/Users/rainerg/ajr/aspirin_knows_localstorage.js', res)\n//clipboard.writeText(res)\nres\n","md5":"7a80534321929078276329af4d05b322","system":"solar","isFunc":false,"_id":"LByaGS9Z3oKL6KoX"}
{"key":"config_reparse","source":"\nconfig = JSON.parse(JSON.stringify(remote.getGlobal('config')))\n\n/**/\nt = _.chain(config)\n  //.map((v,k)=>'#'+k)\n  //.pluck('webPreferences')\n  .reduce((memo, val, key)=>{\n    _.forEach(val, (v,k)=>{\n      if(!memo[k]) memo[k] = {};\n      memo[k][key]=v;  \n    })\n    return memo;\n    //return _.mapObject(val,(v,k)=>[v])\n    //return _.extend(memo, val)\n    //return _.pick(memo, (v,k)=>{\n      //console.log(k, v, val[k])\n      //return v == val[k]\n    //})\n  }, {})//.flatten()\n  .mapObject((val,key)=>_.chain(val)\n             .reduce((m,v,k)=>{\n                if(!m[v]) m[v] = []\n                m[v].push(k)\n                return m\n             },{})\n             .value() )\n  .value()\n  \n  /**/\n\n//.flatten()\n\n\n\n//_.groupBy(config.defaultWindowSetup, (v,k)=>k)\n","md5":"a6d92a300dfa883a8ae0ad7c7501eeb6","system":"solar","isFunc":false,"_id":"MalCb0OOxgd9WwdA"}
{"key":"RENDER_IN_RENDER","source":"url = \"https://www.github.com/\";\nurl = \"file:///Users/rainerg/ajr/Aspirin/windows/html_entity_list.html\";\n\ntpl = jade.compile(`\nstyle\n  :stylus\n    .web-view\n      background: rgba(255,193,7,0.3)\n      margin: 0px\n      padding: 0px\n      position: absolute\n      width: 100%\n      height: calc(100% - 20px)\n      \n      & .wrp\n        width: 100%\n        margin: 0px\n        padding: 0px\n        height: calc(100% - 30px)\n\n        & webview \n          padding: 0px\n          width: 100%\n          hheight: 100%\n          height: calc(100% - 11px);\n        \n.web-view\n  .btn-group\n    button.btn.btn-primary(onclick=\"document.querySelector('#foo').reload();\") reload()\n    button.btn.btn-primary(onclick=\"document.querySelector('#foo').openDevTools();\") openDevTools()\n  .wrp\n    webview#foo(src='${url}')\n\n`)\ntpl()\n","md5":"287211a70a96377a49134493f8ee0e2d","system":"solar","isFunc":false,"_id":"Ms1yGZOnYn2cO11w"}
{"key":"doubleArraySample","source":"timeout = 1;\n/*\nz = 0\nn = 0\nm = 0\nq = []\n/**/\n\n\nn++;\nif(0 == (n = n%10)) m++;\nm = m%10;\nz = z%55;\nq[n] = q[n] || []\nq[n][m] = z++ //+' |' + m +''+ n;\n\n\nq.map(function(v){return v.join('\\t')}).join('\\n')\n\n//a = 12\n\n","md5":"5cffc538f749ceaf8bd05051b5217dfe","system":"solar","isFunc":false,"_id":"O6bZMEQ1teIcgm2z"}
{"key":"RESULTS_TO_DBLIST","source":"colf = require('columnify')\np  = '/Users/rainerg/work/ideals/5000_pdfs/results_www1_full_view_list.json'\n//p  = '/Users/rainerg/work/ideals/_TESTFILES/sample_test_resulth_view_list.json'\n\npaddy = (n, p, c, l) => {\n  var pad_char = typeof c !== 'undefined' ? c : '0';\n  var pad = new Array(1 + p).join(pad_char);\n  if (!l)\n    return (pad + n).slice(-pad.length);\n  else\n    return (n + pad).slice(0, pad.length);\n}\n\n_f = {\n  notError(v) {\n    return !v.error;\n  },\n  gzip(v, pre) {\n    return _(v.gzip_stats).chain()\n      .omit('pages')\n      .reduce((m,v)=>[m[0] + parseInt(v)],[0])\n      .map(v=>[pre+'_gzip',(v/1024).toFixed(1)])\n    //.map((v,k)=>[pre+'_'+k,v])\n      .value();\n  },\n  jointwo: (v2)=>(v1,i)=>[i, v1, v2[i]],\n  info(v) {\n    let {pdf_file_name, pdf_file_size,\n         difference, pdfConv, avg, max,\n         size_comparsion_pdf_block} = v;\n    max = max.toFixed(2);\n    avg = avg.toFixed(2);\n    \n    \n    return difference\n      .map((d,i)=>({pdf_file_name,\n                   page_num: i+1,\n                   mismatch:(d.excludeWhiteRawMisMatchPercentage-0).toFixed(2)\n                  }))\n    return {pdf_file_name, pdf_file_size,\n            pdf_pages_count, gzip_size:(pdfConv.gzip_size/1024).toFixed(2)+'kb', avg, max,\n            size_comparsion_pdf_block};\n  },\n  less: ({analysisTime, excludeWhiteRawMisMatchPercentage, misMatchPercentage})=>\n  ({analysisTime, mismatch:excludeWhiteRawMisMatchPercentage, misMatchPercentage})\n}\n\njj = jetpack.read(p,'json');\n//jLog(jj.length)\njj = jj.filter(_f.notError)\n  .map(_f.info)\n  .reduce((m,d)=>m.concat(d))\n  .filter(v=>v.mismatch)\n\n//jj.length\n;\nou = colf(jj, {minWidth:10})\nof = '/Users/rainerg/work/ideals/5000_pdfs/www1_db.txt'\nou = ou.split('\\n').join('\\r\\n')\n\n//jetpack.write(of,ou)\n//;[ou]\n//_.pluck(out,'comp12').reduce((m,v)=>m+parseFloat(v),0)/out.length\n","md5":"6cacde2193ff7cb7ae4e8118f8ef303f","system":"solar","isFunc":false,"_id":"PBED6Vw3xHHO2eEc"}
{"key":"PDFTESTER_RESULTS_COOL","source":"//sparkly = require('sparkly');ss = sparkly([0, 3, 5, 8, 4, 3, 4, 10]);\ntableify = require('tableify');\ncolumnify = require('columnify');\ndifun = (v,i)=>{\n  let v_nf = res_nf[i];\n  let dd = 0;\n  let out = v.difference\n  .map((pv,pi)=>{\n    let od = pv.excludeWhiteRawMisMatchPercentage;\n    let nd = v_nf.difference[pi].excludeWhiteRawMisMatchPercentage;\n    let d = (nd - od);\n    dd+=nd;\n    return [od, nd, d]})\n  .map(([o, n, d],pi)=>\n       ['   p'+pi,\n        'o=' + o.toFixed(2),\n        'n='   + n.toFixed(2),\n        '∆=' + (n - o).toFixed(2),\n        '<img width=\"900px\" src=\"'\n        + v_nf.difference[pi].diffImage\n        +'\"/><hr/>',\n        ''\n       ].join('\\t'))\n  .join('\\n')\n  //dd = parseFloat(dd)/v.difference.length;\n  return [v.pdf_file_name, dd, out];\n}\n\np = '/Users/rainerg/work/ideals/pdftest/';\nres = jetpack.read(p+'rb_origin.json','json');\nres_nf = jetpack.read(p+'rb_newformula.json','json');\nres_nf = jetpack.read(p+'prod_test_result/result.json','json');\nr = res\n  .filter(v=>!v.error)\n  .map(difun)\n  .sort((a,b)=>b[1]-a[1])\n  .map(([n,dd,r])=>n+' '+dd.toFixed(2)+'\\n'+r)\n  .join('\\n')\n\n//res_nf","md5":"e89c2efd43535265fe31bc94ce0d2b72","system":"solar","isFunc":false,"_id":"QJfjRor206sQKGYo"}
{"key":"split_xNNyNNv2","source":"\n\nfns = ['x10y5','x5y5','x33','y22','x00','0x0','0y0']\n\n\nfns.map(fname=>fname.split('y').reduce((memo, val)=>{\n  if(val.charAt(0)=='x'){\n    memo.x = 1*val.substr(1);\n  }else{\n    memo.y = 1*val}\n  return memo\n},{}))\n\n\n//'y5x2'.split('y')[0].split('x')\n\n\n\n","md5":"8bd377f30afd214fc406a4f94699e520","system":"solar","isFunc":false,"_id":"S08hPvCdJuWq9zQW"}
{"key":"chokidar_test","source":"\nvar chokidar = require('chokidar');\n\n// One-liner for current directory, ignores .dotfiles\nchokidar.watch('.', {ignored: /[\\/\\\\]\\./}).on('all', (event, path) => {\n  console.log(event, path);\n});\n\n\n","md5":"3fe1557794e7b1acea92d6401d83cbc5","system":"solar","isFunc":false,"_id":"T7E3URl1sPb4CVdw"}
{"key":"EDITOR_WATCH_QUANT","source":"\nlet [mw,mh] = [50,60]//getWin('matrix1_view').object.getPosition();\nlet q = windowManager.sharedData.fetch('quants')[0];\nlet k = 10, l = 30;\n\ncw.setPosition(l+mw+q.x*k, 20+l+mh+q.y*k)\n\nq","md5":"6981706ca4349774d7f1edc77bbe4d57","system":"solar","isFunc":false,"_id":"UodpSLoQAqYLmgSa"}
{"key":"PIXELMATCH_TEST","source":"\nf = '/Users/rainerg/work/ideals/pdftest/input_pdfs2_result/'\n+ 'Fundamentals of Nuclear Science & Engineering/'\n//  + 'CV_AndriiRomanchuk/'\n\njetpack.dir(f+'pdiff/')\n\nvar fs = require('fs'),\n    PNG = require('pngjs').PNG,\n    pixelmatch = require('pixelmatch');\n\nout = [];\n\n//*\nst = Date.now();\nprms = jetpack.list(f + 'etalonConv').filter(v=>v.substr(0, 4) == 'page')\n  .splice(0,200)\n  .map(img=> {\n  let i1 = f + 'etalonConv/' + img;\n  let i2 = f + 'pdfConv/' + img;\n\n  return new Promise(resolve=> {\n\n    let sst = Date.now();\n    var img1 = fs.createReadStream(i1).pipe(new PNG()).on('parsed', doneReading),\n        img2 = fs.createReadStream(i2).pipe(new PNG()).on('parsed', doneReading),\n        filesRead = 0;\n\n    function doneReading() {\n      if (++filesRead < 2) return;\n      var diff = new PNG({width: img1.width, height: img1.height});\n\n      var d = pixelmatch(img1.data, img2.data, diff.data, img1.width, img1.height, {threshold: 0.1});\n      resolve([img, img1.width , img1.height ,d,Date.now() - sst]);\n      diff.pack().pipe(fs.createWriteStream(f+'pdiff/'+img));\n    }\n  })\n})\n\nPromise.all(prms).then(r=>{\n  et = Date.now() - st;\n  jLog([et,res=r])\n})\n/**/\n\n\n//res.map(v=>[v[1]*v[2],v[3]])","md5":"c5b1c73e9b6f2e14f15fbbcda966145e","system":"solar","isFunc":false,"_id":"VLbityDdbGLr2RWK"}
{"key":"app_Path_list","source":"\npns = [\n  \"home\",\n  \"appData\",\n  \"userData\",\n  \"temp\",\n  \"exe\",\n  \"module\",\n  \"desktop\",\n  \"documents\",\n  \"downloads\",\n  \"music\",\n  \"pictures\",\n  \"videos\"\n] \n//\"pepperFlashSystemPlugin\" !! doesnot exist in windows\nlet app = require('electron').remote.app\npns.map(p=>p+'   '+app.getPath(p))\n\n","md5":"03726f622e50538b1b42382cca6557fb","system":"solar","isFunc":false,"_id":"Vd03AO0ByV5SK5qH"}
{"key":"brew_cleanup_log_parse","source":"colf = require('columnify');\n\nstr = jetpack.read('/Users/rainerg/dno/brew_cleanup_log.txt')\nlq = {M:1024*1024,K:1024}\ntoNum = (l,v)=>[l,v,parseFloat(v)*lq[l]]\n  \narr = str.split('\\n')\n  .map(l=>(a=l.split('(')) && a.length==2 && a)\n  .filter(_.isArray)\n  .map(([v,l])=>[v.split(' ')[1], l.slice(0,-1)])\n  .map(([v,l])=>[v, ...l.slice(0,-1).split(/, +/).map(v=>v.trim()), l.slice(-1)])\n  .map(v=>[v.shift(),...[...toNum(v.pop(),v.pop()),v.pop()||'1 file'].reverse()])\n  .map(v=>[v[0],...v[1].split(' '),v[2],v[3],v[4]])\n  .sort((a,b)=>b[3] - a[3])\n\ncolf(arr)\n\n","md5":"0a6927720200e478647b40a5504e46c5","system":"solar","isFunc":false,"_id":"XBkQbWQKppTGrgs7"}
{"key":"SHOW_STORE_DATA","source":"timeout = 1000\ncs = require('converter/store')\n_co = {truncate:!true, preserveNewLines:true};\n\nshow = ()=> {\n  all = cs.store.getAll()\n  //.filter(v=>v.status=='loaded')\n  alldata = all.map(v=>{\n    let vo = _.omit(v, ['key','paths','_id','metadata']);\n    vo.docname = v.docname.slice(0,22);\n    //vo.metadata = van_dump(v.metadata).replace(/ /g, \"&nbsp;\");\n    return vo;\n  })\n  justShowResult(jColf(alldata,_co), 1)\n}\n\ncs.store.getDb().loadDatabase(show);\n//cs.store.getDb().updateIndexes()\n//db = cs.store.getDb()\n//db.persistence.compactDatafile()\n\n//justShowResult(jColf(alldata,_co), 1)\n \n","md5":"bd2cb9d8b6fd7cff9405825b50cc612c","system":"solar","isFunc":false,"_id":"XfBjcBbVSHQHjnZW"}
{"key":"∆","source":"\nd = ' ∆ '\nwwe = 11\ntxt0 = _(windowManager.windows).chain()\n  .filter(function(v){return 'editor_' == v.name.substr(0,7)})\n  .map(function(v){\n  \t//v.reload(true)\n    //v.object.send('justScrollAll')\n  \treturn v.object.id+' '+v.name\n\t})\n  .value()\n_(JSON.parse(localStorage.Knows)).pluck('sourceText')\n\nq = !(typeof q == 'boolean') || !q\ngetWin(just.name).object.setIgnoreMouseEvents(q)\ntxt = `<code>TEST 1\n<br/>\n<pre>${van_dump(txt0)}</pre>\n</code><br/>\n<pre>${van_dump(Object.keys(cw))}</pre>\ndf`;\ngetWin(just.name).execute('setContent(`'+txt+'`)')\n\nwwidth = 250\ngetWin(just.name).object.setPosition(screen.width-wwidth, 0)\ngetWin(just.name).object.setSize(wwidth, screen.height)\n\n//JSON.parse(localStorage.Knows)[14].sourceText\nMatrix.getDb().getAllData()\n1\n\ntableify = require('tableify');\n\ndata = Matrix.getDb().getAllData()\ntableify(data)\n\n\n","hash":"d0bbe37dd53b09c55de39da81617b8ec","system":"solar","isFunc":false,"_id":"Xuu091XGH5eaL7G3"}
{"key":"WHITE_PIXEL_TABLE","source":"timeout = 1500;\nisresultHTML = true;\npath = require('path');\nT = require('tableify');\n//f = '/Users/rainerg/work/ideals/pdftest/input_pdfs2_result/'\n//+ 'Fundamentals of Nuclear Science & Engineering/';\n//f += 'etalonConv';\n//f += 'result.json';\nf = '/Users/rainerg/work/ideals/pdftest/input_pdfs2_result/result.json';\n\njj = jetpack.read(f,'json')\n//n=++n%9\n//n=0\nrr = jj.map(jjj=>{\nlet {excludeWhite, hwcount, testP, mismatchCount,diffImage,rawMisMatchPercentage} = jjj.difference[0];\n\n//(8415000 - 5668675)//141040\nlet calcWH = (mismatchCount / (hwcount - excludeWhite) * 100).toFixed(4)\nlet calcMis = rawMisMatchPercentage.toFixed(4);\n  \nreturn {\n  name:diffImage.substr(54,13).split('/')[0],\n  //(141040 / (8415000 - 5668675) * 100),\n  calc:{\n    calcWH,\n    calcMis,\n    imp: (calcWH-calcMis).toFixed(4), testP\n  },\n  raw:{excludeWhite, hwcount, notWhiteP: hwcount-excludeWhite, mismatchCount}\n};\n})\n\nT(rr);","md5":"291da6c73b7ecd036532cdf145430719","system":"solar","isFunc":false,"_id":"ZgIqrm70eqCudvNw"}
{"key":"SHOW_LIST_PDFS","source":"//var bp = '/Users/rainerg/work/ideals/pdftest/input_pdfs_result_copy/';\nvar bp = '/Users/rainerg/work/ideals/pdftest/input_pdfs2_result/';\nsizeOf = require('image-size');\n// var p = 'Fundamentals of Nuclear Science & Engineering';\n// var p = 'freeculture';\nvar p = '2011-D3-InfoVis';\n//var p = 'bug852992_reduced';\nconsole.log(bp + p);\n\nvar dirlist = fs\n  .readdirSync(bp)// + p + '/etalonConv');\n  .filter(d=>fs.lstatSync(bp+d).isDirectory())\n  //.filter(d=>fs.readdirSync(bp+d+'/etalonConv').length)\n  //.filter(d=>fs.readdirSync(bp+d+'/pdfConv').length)\n  //.map(d=>[d,sizeOf(bp+d+'/etalonConv/page-001.png'),sizeOf(bp+d+'/pdfConv/page-001.png')])\n\ndirlist","md5":"62d849dd82d800fbe1e290b263033e53","system":"solar","isFunc":false,"_id":"cCvDh9bv3qcCZx5J"}
{"key":"DUMP_DATE_FUNCS","source":"dno = Object.getOwnPropertyNames(Date.prototype).filter(k=>k[0]!='s')\n\ncolf = require('columnify')\nd = new Date();\n\narr = dno\n  .map(k=>[k, d[k]()])\n\ncolf(arr)\n","md5":"a71c817ec61e03d9ed52f8a387c4a855","system":"solar","isFunc":false,"_id":"fAUMNcyr5DiV29BY"}
{"key":"TIME_SHIT","source":"\nta = [\n  ['11:34:12', '12:32:35'],\n  ['12:37:02', '12:58:43'],\n  ['13:00:24', '13:57:40'],\n  ['15:16:16', '16:46:57'],\n  ['16:53:04', '17:58:09'],\n  ['18:01:39', '18:48:37'],\n  ['18:53:30', '20:18:01']\n]\n\nft = ta.map(v=>v.map(t=>t.split(':').reduce((m,v)=>m*60+v*1)))\n  .map(([f,t])=>({f, t, d:t-f}))\n  .map(({f, t, d},i,a)=>({f, t, d, pd:(a[i-1] && a[i-1].t && (f-a[i-1].t) || 0)}))\n\nts = ft.reduce((m,v)=>m+v.d,0)\n\nh = ts/(60*60)|0;\nts -= h*60*60|0;\nm = Math.round(ts/60);\n\n\n\nsmoke = ft.reduce((m,v)=>{\n  if(v.pd<(15*60))\n    m+=v.pd;\n  return m;\n},0)\n\n;`total ${h}h ${m}m, smoke: ${smoke/60|0}m ${smoke%60}s`\n","md5":"8882399880af3df92abb9069c35510e8","system":"solar","isFunc":false,"_id":"fVjqgwdzjICNRfkC"}
{"key":"robotjs_PixelColor_example","source":"//Get pixel color under the mouse. \nvar robot = require(\"robotjs\");\n\nrender = (time)=>{\n  //Get mouse position. \n  var mouse = robot.getMousePos();\n  var hex = robot.getPixelColor(mouse.x, mouse.y);\n  console.log(time, mouse, \"#\" + hex + \" at x:\" + mouse.x + \" y:\" + mouse.y);\n}\n\nrepeat = t => {\n  render(t); \n  \n  requestAnimationFrame(repeat);\n}\n\nrequestAnimationFrame(repeat);\n\n","md5":"79e80892df1ccaf7c0c28a579db3f956","system":"solar","isFunc":false,"_id":"gfJfrsCisi5x0A2g"}
{"_id":"id0","planet":"000Mars2","system":"solar","inhabited":false}
{"_id":"id1","planet":"Mars","system":"solar","inhabited":false}
{"_id":"id2","planet":"Mars2","system":"solar","inhabited":false}
{"hello":"world","n":5,"_id":"id3","today":{"$$date":1466926505038},"nedbIsAwesome":true,"notthere":null,"fruits":["apple","orange","pear"],"infos":{"name":"nedb"}}
{"hello":"world","n":5,"_id":"id8","today":{"$$date":1466926513383},"nedbIsAwesome":true,"notthere":null,"fruits":["apple","orange","pear"],"infos":{"name":"nedb"}}
{"hello":"world","n":5,"_id":"id89","today":{"$$date":1266923720499},"nedbIsAwesome":true,"notthere":null,"fruits":["apple","orange","pear"],"infos":{"name":"nedb"}}
{"key":"robotjs_moveMouse_example","source":"//Get pixel color under the mouse. \nvar robot = require(\"robotjs\");\n\n\nrobot.setMouseDelay(2);\n\nvar twoPI = Math.PI * 2.0;\nvar screenSize = robot.getScreenSize();\nvar height = (screenSize.height / 2) - 10;\nvar width = 2*screenSize.width;\n\nfor (var x = 0; x < width; x++)\n{\n    y = height * Math.sin((twoPI * x) / width) + height;\n    //console.log(mouse, \"#\" + hex + \" at x:\" + mouse.x + \" y:\" + mouse.y);\n    robot.moveMouse(x, y);\n}","md5":"52d619c33b1a5ffebe8aff79d6696430","system":"solar","isFunc":false,"_id":"jJ0NCUyArTDZq23y"}
{"key":"nodetest","source":"//if(typeof n == 'undefined')n = 0;\n//console.log('G>> ', n)\n//global['test'] = n++\n//wm = require('electron-window-manager');\n//console.log(Object.keys(wm.windows));\n\nrequire('electron').app.getAllWin = function(){\n  wm = require('electron-window-manager');\n  return Object.keys(wm.windows);\n  \n}\n\n","md5":"2130fe6ed01ac3c1716e9e014d652b39","system":"solar","isFunc":false,"_id":"jQm4Ok4tRkdWF7hh"}
{"key":"CASCADE_ALL_WINDOWS","source":"\nexw = [windowManager.getCurrent().name, \"ALL_WINDOW_SCROLL\", \"codeList\", \"showCodeList\", \"toolbar\", \"listknows\", \"showTime\", \"fulloverlay\"];\n\nwarr = _(remote.getGlobal('getAllWin')())\n  .chain()\n  .filter(w=>!exw.includes(w))\n  .map(w=>windowManager.get(w))\n  .filter(w=>!w.object.isAlwaysOnTop())\n  .sortBy(w=>-w.object.getSize()[1])\n  .value()\n\nres = warr.map(function(wm,i){\n  //let [wx,wy] = w.object.getPosition();\n  //alert(w.name + i)\n  let w = wm.object;\n  let top = w.isAlwaysOnTop();\n  i++;\n  w.setAlwaysOnTop(true);\n  w.setVisibleOnAllWorkspaces(true);\n  w.focus();\n  \n  w.setPosition(20*i,30+22*i,!true);\n  \n  w.setAlwaysOnTop(false);\n  w.setVisibleOnAllWorkspaces(false);\n  return [wm.name,w.getSize()[1]].join('  ');\n})\ncw.focus();\nres\n\n","md5":"bffa96df4ee25beb4b9466edae46d130","system":"solar","isFunc":false,"_id":"jehyKDRccnnejRAw"}
{"key":"PDF_DIFFTABLE","source":"tableify = require('tableify');\nisresultHTML = true;\nfile = '/Users/rainerg/work/ideals/pdftest/'\n    + 'input_pdfs2_result/'\n  //+ 'test_pdfs_result'\n//  + 'test_pdfs_result'\n  + 'result.json';\n\njn = jetpack.read(file,'json')\n\n//if(0)\njn = jn.map(v=>{\n  // /10|0)/100+'s';\n  delete v.difference; //= v.difference.map(v=>v.analysisTime).join(', ');\n  v.etalon = v.etalon.duration;\n  v.pdfConv = v.pdfConv.duration;\n  return v\n})\n\njn = jn.filter(v=>!v.error)//.sort((a,b)=>b.etalon-a.etalon)\n\ntableify(jn)\n","md5":"90b2df96e95c43d816817f6ebe7ff473","system":"solar","isFunc":false,"_id":"jiAuiI2gUPYbcsgK"}
{"key":"EDITOR_THEMES","source":"timeout=1000\nw = getWin('editor_0') //.object ;editor_VIEW_AS_TABLE\nif(w){\n  ewb = w.object.getBounds()\n}\n//editor.lineCount()\n//w.object.webContents.executeJavaScript(\n//screen.width\nn++;\np = path.resolve(appPath,'node_modules', 'codemirror', 'theme');\ntl = jetpack.list(p);\nn=n%tl.length;\nct = path.parse(tl[n]).name;\n//lesser-dark\ncode = `\ndocument.getElementsByTagName( \"head\" )[0].children[3]\n.href = '../node_modules/codemirror/theme/${ct}.css';\neditor.setOption('theme', '${ct}')\n`\nw.object.webContents.executeJavaScript(code);\n\nn+' '+ct;\n\n","md5":"e6cecb39fd8c8c885d87f6cd44059a88","system":"solar","isFunc":false,"_id":"lO23lMoDtfJGuZOt"}
{"key":"matrix1_newFn_theory","source":"testQuant = {\n  speed:{\n    x:1,\n    y:0\n  },\n  x:0,\n  y:0\n};\ntqq = _.extend(_.clone(testQuant), {y:3,data:['firstArg','asteroidevotake']})\nsss = (err, docs)=>{\n\n  arr = docs.map(d=>({key:d.key, source:d.source}))\n\n\n  funcClass = arr.reduce((pv,cv,ci)=>{\n    pv[cv.key] = new Function(cv.source);\n    return pv;\n  },{})\n  //justResult(van_dump(out));\n\n}\nMatrix.getDb().find({ key: { $exists: true } }).sort({key:1}).exec(sss)\n\n///////\n\nef = `\n\n\nconsole.log(data,this)\n\ndata.push('dsa'+n++);\nreturn van_dump(data)\n`\n\nnewFn = (src)=> {\n  var n = 10;\n  return new Function('data',src);\n}\nrunFn = (fn, ags)=>{\n  rtf.apply(tq, [tq.data, 'secondArg'])\n}\nrtf = newFn(ef)\n//_.functions(funcClass)\n\nrtf.apply(tq, [tq.data, 'secondArg'])\n","md5":"82ed53e3fc8dd53298b57c990761dc89","system":"solar","isFunc":false,"_id":"mUOOHAn57SvGbge9"}
{"key":"TIME_WORKS","source":"moment = require('moment')\ntime = jetpack.read('/users/rainerg/Downloads/time11.csv')\n  .split('\\r\\n').map(v=>v.split(';'))\n  .map(([date, from, to])=>({date, from, to}))\n\n\ncolf(time)","md5":"bc24cf23e0f1f1e02f534c8a51519277","system":"solar","isFunc":false,"_id":"mj6LxwuDvt8FmFif"}
{"key":"SaveToCodeList","source":"source = editor.getValue()\nhash = md5(source)\ndoc = { key: just.name || hash, source: source, md5: hash, system: 'solar', isFunc: false }\n\nMatrix.getDb().update({key:doc.key}, doc, {upsert: true});","md5":"410b83955b5c7c344e9ee7705a16d024","system":"solar","isFunc":false,"_id":"oZ6YooCJ5j2wvvsS"}
{"key":"min_0_setConten_sample","source":"\ntableify = require('tableify');\n\nrend = function(e,d){\n  d1 = _.map(d,function(v){\n    return _.values(v).join(', ')\n  })\n  justShowResult(van_dump(d1));\n  windowManager.sharedData.set('minTest0', {'content': van_dump(d)});\n  getWin('min_0').execute(`data = windowManager.sharedData.fetch('minTest0');\n  setData(data.content)`);\n  console.table(d);\n}\n\nMatrix.getDb().find({ key: { $exists: true } }).sort({key:1}).exec(rend)\n\n","md5":"ac5f094b93466edbce117d4c24377a88","system":"solar","isFunc":false,"_id":"pZX91i20WT10itcJ"}
{"key":"EVAL_DNO","source":"meta_pre_elem = document.querySelector('#meta_toolbar');\nrequire_override = function(mod_name){\n    arrreqfns.push({mod_name, \n                    file_path: require.resolve(mod_name)});\n    //let out = arrreqfns.map(v=>`${v.mod_name}: ${v.file_path}`).join('\\n');\n    let out = colf(arrreqfns);\n    meta_pre_elem.innerHTML = \n      `<pre class=\"result\"><code>REQUIRED MODULES:</code>\n\n<code>${out}</code></pre>`;\n    //console.log(arguments);\n    return require.apply(null,arguments);\n  }\nObject.assign(require_override, require);\n\nevalFN = function(code){\n  arrreqfns = [];\n  return (function(require){\n    return eval(code); \n  })(require_override);\n}\n\n","md5":"f66ac12a698193c6da7338143cc12ee9","system":"solar","isFunc":false,"_id":"qLn5rGbRVWTn358K"}
{"key":"splash_banner_timer","source":"window.mm = 15;\nvar msg = 'Прошло \\'+m.toNow(true)+\\'!<pre>\\'+(moment().diff(cm)/1000).toFixed(1)+\\'s</pre>'\nvar jscode = [`\nvar moment = moment || require('moment');\nmoment.locale('ru'); var cm = moment();\nvar m = moment().subtract(${mm},'minutes');\ndocument.querySelector('.boz-header').innerHTML = 'TIMEOUT:('+(moment().diff(m)/1000).toFixed(1)+') '+ m.format('H:mm:ss a, dddd');\nvar gettime = ()=>'Сейчас '+ moment().format('[<b>]H:mm:ss[</b>] a, dddd,[<br/>] D MMMM Y');\nvar t = '<style>';\nt += 'body{background:none;} .boz-header{background:#2e2e2e;}';\nt += '@keyframes blinker {50% { opacity: 0; }}';\nt += '.flsh{animation: blinker .8s ease 0s 3 running; }';\nt += '#content{background:#ff5722;width:100%}';\nt += '.msg{font-size:3.8em; letter-spacing: -1.5pt; text-align: center; color: white; margin:0.5rem 0;}';\nt += '.msg #msg-text{color:#ff5722; background:beige;}';\nt += '.msg #msg-text pre{margin:5pt 0; font-size:20pt;}';\nt += '.msg-time{color: #eee; font-size: 18pt; text-align: center;margin: 0;font-weight: 600;text-rendering: geometricPrecision;letter-spacing: 3pt;}';\nt += '.msg-time b {color: #fff;font-size: 22pt;';\nt += '</style>';\nt += '<div class=\"msg\"><span id=\"msg-text\">${msg}</span></div>';\nt += '<h2 class=\"msg-time\">'+gettime()+'</h2>';\nsetContent(t);\nwindow.prevIntervals && prevIntervals.forEach(v=>clearInterval(v))\nvar ready = ()=>{\n  setTimeout(()=>document.querySelector('#content').classList.add('flsh'), 150);\n  setTimeout(()=>document.querySelector('#content').classList.remove('flsh'), 2500);\n  prevIntervals = [\n    setInterval(()=>document.querySelector('.msg-time').innerHTML = gettime(), 1000),\n    setInterval(()=>document.querySelector('#msg-text').innerHTML='${msg} ', 1000)\n  ];\n}\nready();\n`][0];\n\nwindow.jLog = window.jLog || ((m)=>console.log(m));\nwindow.genwin = (code)=>()=>{\n  let runwin = (w)=>()=>{\n    jLog('1_'+w.object.webContents.getURL());\n    w.object.setAlwaysOnTop(true);\n    w.object.webContents.setZoomLevel(-2);\n    w.object.setBounds({\"x\": 1100, \"y\": 20, \"width\": 400, \"height\": 105});\n    //w.object.setBounds({\"x\": -755, \"y\": -731, \"width\": 600, \"height\": 200});\n    setTimeout(()=>{\n      jLog('2_'+w.object.webContents.getURL());\n      //w.close();\n    }, 6000);\n    w.object.webContents.executeJavaScript(code);\n  }\n  setTimeout(runwin(giveWin('splash')), 300);\n};\n\n//var sw = giveWin('splash');\n//jLog('0_'+sw.object.webContents.getURL());\n\nwindow.tmt = genwin(jscode);\nwindow.run = (y=0)=>{\n  clearTimeout(window.rI);\n  if(y==2) return;\n  if(y) tmt();\n  window.rI = setTimeout(()=>run(y+1), 1000*60*(mm+y/60));\n}  \nrun();\n\n'--';\n","md5":"82c64cbbcb73aa43014ff41e068dd5d2","system":"solar","isFunc":false,"_id":"qjlmKzme5FjzUjbR"}
{"key":"testCode_valid","source":"\nstext = JSON.parse(localStorage.KnowsLastSave)[11].sourceText\n\ntestCode = (src)=>{\n  let out = false;\n  let fn\n  try {\n    if(fn = new Function('dat',src))\n      out = src\n      } catch (e) {\n        //[e.name,e.message]\n        out = '_txt=`'+src+'`'\n      }\n  return out\n}\ns1 = testCode(stext)\n\n//testCode(s1)","md5":"099d9252da954c179de384bf58b8f922","system":"solar","isFunc":false,"_id":"rLusMamKYZMeiUwO"}
{"key":"md5_nodemodules_list","source":"\nisresultHTML = true\n\nsearch = (str)=>jetpack.list('node_modules').filter(v=>v.slice(0,str.length)==str)\n\ndirlist = search('')\n  .map(f=>path.resolve('node_modules',f,'readme.md'))\n  .filter(jetpack.exists)\n  .map((f,i)=>['my index = '+i, 'my md5 = '+md5(f),...jetpack.read(f).split('\\n').slice(0,3)].join('\\n'))\n  .join('\\n ---- \\n\\n\\n')\n\n\n","md5":"4985d901d2ab14e745b9a89c83e350b8","system":"solar","isFunc":false,"_id":"rMfELoJvFgN6T2dy"}
{"key":"firstCode","source":"\"000Mars2\"","system":"solar","isFunc":false,"_id":"sMbd2OzhgiZ68JdB"}
{"key":"PDFJS_PAGETEXTS","source":"colf = require('columnify')\n\nPDFJS = require('pdfjs-dist')\nPDFJS.workerSrc = require.resolve('pdfjs-dist/build/pdf.worker');\n\npfile = \"/Users/rainerg/work/ideals/5000_pdfs/1128882.pdf\";\n\nPDFJS.getDocument(pfile).then(pdf=>{\n  //Array(pdf.numPages).fill().map()\n  //debugger\n  pdf.getPage(1).then(page=>{\n    page.getTextContent({normalizeWhitespace: true}).then(text=>{\n      justShowResult(colf(text.items))\n      //debugger\n    })\n    //jLog(pdf.numPages)\n  })\n})\n\n'run'\n","md5":"3df113f9a6901575e4b04fc066cba8b1","system":"solar","isFunc":false,"_id":"t5Fuj8maAqwnzXJP"}
{"key":"localStorageKnowsPrint","source":"function htmlEncode( html ) {\n    return document.createElement( 'a' ).appendChild( \n        document.createTextNode( html ) ).parentNode.innerHTML;\n};\n\narr = JSON.parse(localStorage.Knows).filter(d=>d && d.sourceText)\narr.map((d,k)=>`<h1>---${k}------------------------------------------</h1> \n\\n <pre>${_.escape(d.sourceText)}</pre>`).join('\\n')\n\n","md5":"983f49ac3571d6b4dbf52884c39fcb66","system":"solar","isFunc":false,"_id":"toMHG2h5ebJKVAyI"}
{"key":"A_LIST_Rxlab","source":"\nrequest = require('request')\nurl = \"http://lab.rainerg.net/php-crud-api/api.php/simple\"\n\n\nonResult = (data)=>{\n  dat = data;\n  da = data.simple.records\n    .map(v=>[v[0], (`${v[1]}`)].join('\\n'))\n    .join('\\n')\n  justShowResult(da)\n}\n\n(!window.dat)&&request\n.get({url, json:true})\n.on('response', function(response) {\n  res = response;\n  console.log(response.statusCode) // 200 \n  console.log(response.headers['content-type']) // 'image/png' \n  res.setEncoding('utf8');\n  let rawData = '';\n  res.on('data', (chunk) =>rawData += chunk);\n  res.on('end', () => {\n    try {\n      let parsedData = JSON.parse(rawData);\n      onResult(parsedData);\n    } catch (e) {\n      console.log(e.message);\n    }\n  });\n})\n//null\nout = dat.simple.records\n//.map((v,i)=>['//I = ',i,'\\n//key = ', v[0],'\\n//name = ', v[1],'\\n', v[2]].join(''))\n//.filter(txt=>txt.indexOf('MAIN')>0)\n  .reduce((m,v)=>{\n  let [id,name,src] = v;\n  m.push({id,name,i:'-'})\n  let lines = src.split('\\n');\n  lines.map(JSON.stringify)\n    .map((line,i)=>m.push({name:'',i,line}));\n  //m.push({id,i:''})\n  m.push({id,name,i:'-'})\n  m.push({id:'',i:''})\n  \n  return m;\n},[])\n\n'<pre>'+justShowResult(jColf(out),1)//out.join('\\n--\\n'))\n","md5":"18b47f4b7b93c0421db1b0be30fb170a","system":"solar","isFunc":false,"_id":"uAvhPohcmHTQBwdm"}
{"key":"runInNode_nodetest","source":"\ntimeout = 1\nremote.app.Database.run('nodetest')\n//Database.run('nodetest')\n\n","md5":"066e06d9eecf0b477131ad63b1c3dd34","system":"solar","isFunc":false,"_id":"un7OWKM45c9JOhol"}
{"key":"example_iteraction","source":"var msg = 'Прошло пол часа!'\nfunction run(){\n  var sw = giveWin('test_move').object;\n\n  b = sw.getBounds();\n  txt = van_dump(b);\n  sw.setSize(220,170);\n  /*\nsw.setBounds({\n  \"x\": b.x-110,\n  \"y\": b.y,\n  \"width\": 150,\n  \"height\": 150\n});\n/**/\n  sw.webContents.executeJavaScript(`\ndocument.body.style.backgroundColor = '#FF5722';\nsetContent(\\`<pre>${txt}</pre>\\`);\n`);\n}\n\nsetTimeout(run, 10)\n","md5":"3b7fc1d4343344434574c31918da84b8","system":"solar","isFunc":false,"_id":"wqRvvaHAX52j5Cd8"}
{"key":"print_text","source":"\nvar fn = function (val){\n  //alert('do '+val); \n  return new Promise((resolve, reject)=>{\n    //alert('oxyeval'+val);\n\n    document.body.innerHTML \n      += '<div style=\"color:red;\">resolved: '+val+' </div>'\n    resolve(val+'is good!')\n  })\n}\nPromise.resolve(fn);  ","md5":"10a06dd687465a5520b4811dfd22a687","system":"solar","isFunc":false,"_id":"yZwqGyVLQz0aKuxE"}
{"key":"PDF_PROGRESS_DIFF","source":"pold = '/Users/rainerg/work/ideals/5000_pdfs/results_www1_full_view_list.json'\np = '/Users/rainerg/work/ideals/5000_pdfs/rest_pdfs_result_full_view_list.json'\n//p = '/Users/rainerg/work/ideals/5000_pdfs/results_www1h_view_list.json'\njjold = jetpack.read(pold,'json')\njj = jetpack.read(p,'json')\n\nobjjold = {}; \njjold.forEach(v=>{\n  objjold[v.pdf_file_name] = v;\n})\n\n\nout = jj.map(v=>({pdf_name:v.pdf_file_name,\n                     new_avg: v.avg,\n                     old_avg: objjold[v.pdf_file_name].avg,\n                     diff_avg:(objjold[v.pdf_file_name].avg - v.avg).toFixed(2)\n                    })).sort((a,b)=>b.diff_avg-a.diff_avg)\n\ncolf(out)\n","md5":"e9b84cd4f7371a6fe275de9a87255d6a","system":"solar","isFunc":false,"_id":"zKkK5rq5SQwcijYR"}
{"key":"INSTALL_DNO","source":"<h1>Hello Again!!</h1><span>save dno</span>\n<button \nclass=\"btn btn-large btn-default\" \nonclick=\"[...document.getElementsByTagName('code')]\n  .reduce((m,v)=>[...m,v.innerText],[])\n  .map((v,k)=>[Array('./system/dno.js','./system/storage.js').map(v=>jetpack.path(v))[k],v])\n  .map(v=>jetpack.write(...v))&&(window.DNO=require(jetpack.path('./system/dno')))&&this.classList.add('btn-positive')\">\n<span class=\"icon icon-cd icon-text\"></span>\ndno.js</button>    <button \nclass=\"btn btn-large btn-primary\" \nonclick=\"alert(DNO.name)\">\n<span class=\"icon icon-lamp icon-text\"></span>\nTEST</button>   <button \nclass=\"btn btn-large btn-warning\" \nonclick=\"['./system/dno.js','./system/storage.js'].map(v=>jetpack.path(v))\n  .map(file=>remote.require('module')._cache[file]=null);\">\n<span class=\"icon icon-lamp icon-text\"></span>\nFIX</button>\n\ndno.js<code>\nconst _isnode = !(process.type == 'renderer');\nvar storage;\n\nvar dbs = {};\n\nfunction require_as_node_storage () { \n  const { remote } = require('electron');\n  return remote.require(__dirname+'/storage');\n}\n\nif(_isnode) {\n  storage = require(__dirname+'/storage');\n} else {\n  storage = require_as_node_storage();\n}\n\nclass Dno {\n  static open(name) {\n    if(!name)\n      throw new Error('Error: Storage: name is not defined!')\n    if(!dbs[name])\n      dbs[name] = new Dno(name);\n\n    return dbs[name];\n  }\n\n  constructor(name, opts = {}){\n    this.name = name;\n    this.opts = opts;\n    this.storage = storage.open(name);\n    this.db = this.storage.db;\n  }\n\n  findOne (opt) {\n    return (new Promise((resolve,reject)=>{\n      this.db.findOne(opt)\n      .exec((err, doc)=> err ? reject(err) : resolve(doc));\n    }))\n  }\n  \n  find (opt) {\n    return (new Promise((resolve,reject)=>{\n      this.db.find(opt)\n      .exec((err, doc)=> err ? reject(err) : resolve(doc));\n    }))\n  }\n  \n  run (key, opt) {\n    return this.findOne({key})\n    .then(doc=>eval(doc.source))\n  }\n  \n  save (key, val) {\n    let k = {key};\n    let doc = {key, source: val};\n\n    function onUpdate(err, doc) {\n      //justShowResult(van_dump(doc.source))\n    }\n\n    this.db.update(k, doc, {upsert: true}, onUpdate);\n  };\n  rawData (){\n    return this.db.getAllData();\n  }\n}\n\nmodule.exports = Dno;\n\n</code>\nstorage.js\n<code>const _isnode = !(process.type == 'renderer');\nconst nedb = require('nedb');\n\nvar dbs = {};\n\nclass Storage {\n  static test() {\n    return _isnode;\n  }\n  static open(name, path) {\n    if(!name)\n      throw new Error('Error: Storage: name is not defined!')\n    if(!dbs[name])\n      dbs[name] = new Storage(name, {path});\n\n    return dbs[name];\n  }\n\n  constructor(name, opts = {}){\n    this.name = name;\n    this.opts = opts;\n    this.filename = __dirname + '/data/' + this.name + '.json';\n    this.load();\n  }\n\n  load(){\n    this.db = new nedb({\n      filename: this.filename, \n      autoload: true,\n\n      onload: function () {\n        //console.log(db.getAllData())\n      }\n    });\n    \n  }\n\n   getDb() {\n    return this.db;\n  }\n}\n\nmodule.exports = Storage;\n\n\n</code>\n","md5":"80f4a02ec3760e8b0936bee9afe2b22a","system":"solar","isFunc":false,"_id":"zQwRKxPV229WNLhV"}
{"key":"x46y40","source":"\nthis.speed.y = -1\n\n","md5":"9ebb52ccddf436443a451848934d96fe","system":"solar","isFunc":false,"_id":"zgiFbcLVzt6Jdh7x"}
