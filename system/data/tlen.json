{"key":"good_code_undefined","source":"w = getWin('editor_32').object\n\ncode =()=>{\n  return `\njustScale = (s=1)=>{\n  greatScale = s;\n  cw.webContents.setZoomFactor(greatScale);\n}\n\n_sy =function () {\n  //--------------?\n  display = remote.screen.getPrimaryDisplay().bounds;\n  //--------------?\n  var container = document.getElementById('editor');\n  var results = document.getElementById('result');\n  var composite = document.getElementById('composite');\n  var composite_wrap = document.getElementById('composite_wrap');\n  var totalWidth = 680;// container.offsetWidth;\n  var resultsHeight = results.offsetHeight;\n\n  if (resultsHeight >= 1000) {\n    resultsHeight = 1000;\n    results.onmousewheel = _scrl;\n\n  } else {\n    results.onmousewheel = false;\n  }\n\n  //console.log('si senior', composite.offsetHeight)\n\n  if (composite.offsetHeight >= 2500) {\n    composite_wrap.style.maxHeight = '900px';\n    //resultsHeight = 200;\n    composite_wrap.onmousewheel = _scrl;\n\n  } else {\n    composite_wrap.style.maxHeight = 'none';\n    composite_wrap.onmousewheel = false;\n  }\n\n  var upHeight = results.offsetTop - container.offsetHeight + 22;\n  //console.log(editor)\n  // var editorHeight = 8 + 16 * editor.lineCount();\n  var editorHeight = editor.getScrollInfo().height;\n\n  var totalHeight = editorHeight + upHeight + resultsHeight;\n\n  //editor.setSize(totalWidth, editorHeight);\n  //editor.refresh();\n  _currentEditorHeight = totalHeight;\n  remote.getCurrentWindow().setSize(totalWidth*greatScale|0, totalHeight*greatScale|0);\n\n  // var scrollerElement = editor.getScrollerElement();\n  // scrollerElement.style.width = containerWidth + 'px';\n  // scrollerElement.style.height = containerHeight + 'px';\n\n}\n\n_syd = _.debounce(_sy, 100);\n`\n}\n\nwarr = _(remote.getGlobal('getAllWin')())\n  .chain()\n  .filter(w=>w[0]=='e')\n  .map(w=>windowManager.get(w))\n  //.filter(w=>!w.object.isAlwaysOnTop())\n  //.sortBy(w=>-w.object.getSize()[1])\n  .value()\n\n//warr.map(w=>w.object.webContents.executeJavaScript(code))\n//warr.map(w=>w.object.webContents.executeJavaScript('justScale(.7)'))\nwarr.map(w=>w.object.webContents.executeJavaScript(\"DNO.open('tlen').save('good_code_'+w.name,editor.getValue())\"))\n\nS = 1;\n\n//justScale(S)\n\nS","_id":"8o6iZsIwYrvYMK3u"}
{"key":"good_code_undefined","source":"w = getWin('editor_32').object\n\ncode =()=>{\n  return `\njustScale = (s=1)=>{\n  greatScale = s;\n  cw.webContents.setZoomFactor(greatScale);\n}\n\n_sy =function () {\n  //--------------?\n  display = remote.screen.getPrimaryDisplay().bounds;\n  //--------------?\n  var container = document.getElementById('editor');\n  var results = document.getElementById('result');\n  var composite = document.getElementById('composite');\n  var composite_wrap = document.getElementById('composite_wrap');\n  var totalWidth = 680;// container.offsetWidth;\n  var resultsHeight = results.offsetHeight;\n\n  if (resultsHeight >= 1000) {\n    resultsHeight = 1000;\n    results.onmousewheel = _scrl;\n\n  } else {\n    results.onmousewheel = false;\n  }\n\n  //console.log('si senior', composite.offsetHeight)\n\n  if (composite.offsetHeight >= 2500) {\n    composite_wrap.style.maxHeight = '900px';\n    //resultsHeight = 200;\n    composite_wrap.onmousewheel = _scrl;\n\n  } else {\n    composite_wrap.style.maxHeight = 'none';\n    composite_wrap.onmousewheel = false;\n  }\n\n  var upHeight = results.offsetTop - container.offsetHeight + 22;\n  //console.log(editor)\n  // var editorHeight = 8 + 16 * editor.lineCount();\n  var editorHeight = editor.getScrollInfo().height;\n\n  var totalHeight = editorHeight + upHeight + resultsHeight;\n\n  //editor.setSize(totalWidth, editorHeight);\n  //editor.refresh();\n  _currentEditorHeight = totalHeight;\n  remote.getCurrentWindow().setSize(totalWidth*greatScale|0, totalHeight*greatScale|0);\n\n  // var scrollerElement = editor.getScrollerElement();\n  // scrollerElement.style.width = containerWidth + 'px';\n  // scrollerElement.style.height = containerHeight + 'px';\n\n}\n\n_syd = _.debounce(_sy, 100);\n`\n}\n\nwarr = _(remote.getGlobal('getAllWin')())\n  .chain()\n  .filter(w=>w[0]=='e')\n  .map(w=>windowManager.get(w))\n  //.filter(w=>!w.object.isAlwaysOnTop())\n  //.sortBy(w=>-w.object.getSize()[1])\n  .value()\n\n//warr.map(w=>w.object.webContents.executeJavaScript(code))\n//warr.map(w=>w.object.webContents.executeJavaScript('justScale(.7)'))\nwarr.map(w=>w.object.webContents.executeJavaScript(\"DNO.open('tlen').save('good_code_'+w.name,editor.getValue())\"))\n\nS = 1;\n\n//justScale(S)\n\nS","_id":"8o6iZsIwYrvYMK3u"}
{"key":"good_code_editor_3","source":"nedb = require('nedb')\nlet app = require('electron').remote.app\nmyDocumentsPath = app.getPath('documents')\ndbPath = path.resolve(myDocumentsPath, 'convertor_results_lab.db')\ndbPath = \"/Users/rainerg/work/ideals/5000_pdfs/converter_src/convertor_results_www1.db\"\ndb = new nedb({filename: dbPath, autoload: true})\n\n_co = {truncate:!true, preserveNewLines: !true};\n\nshow = ()=> {\n  all = db.getAllData();\n  groups = _.groupBy(all,'status');\n  \n  groups = Object.keys(groups).map(k=>[k, groups[k].length]);\n  \n  //all = all.filter(v=>v.status=='error')\n  alldata = all.map(v=>{\n    let vo = _.omit(v, ['key','paths','_id','metadata']);\n    vo.docname = v.docname.slice(0,22);\n    //vo.metadata = van_dump(v.metadata).replace(/ /g, \"&nbsp;\");\n    return vo;\n  })\n  alldata = _.sortBy(alldata,'docname')\n  str = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  //justShowResult(str, 1)\n  \n  justShowResult(str2)\n}\n\ndb.loadDatabase(show);\n\n//*\nstr = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n/**/\n//db.updateIndexes()\n//\n//nedb\n//db.getAllData()\n//dbPath","_id":"eJWR0ulYWLWSBgqo"}
{"key":"good_code_editor_5","source":"timeout = 1000\ncs = require('converter/store')\n_co = {truncate:!true, preserveNewLines: !true};\n\nshow = ()=> {\n  all = cs.store.getAll()\n  groups = _.groupBy(all,'status');\n  \n  groups = Object.keys(groups).map(k=>[k, groups[k].length]);\n  \n  //all = all.filter(v=>v.status=='error')\n  alldata = all.map(v=>{\n    let vo = _.omit(v, ['key','paths','_id','metadata']);\n    vo.docname = v.docname.slice(0,22);\n    //vo.metadata = van_dump(v.metadata).replace(/ /g, \"&nbsp;\");\n    return vo;\n  })\n  alldata = _.sortBy(alldata,'size')\n  str = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n}\n\ncs.store.getDb().loadDatabase(show);\n//cs.store.getDb().updateIndexes()\n//testFN = function(){\n//  jLog('copacting done')\n//}\n\n//db = cs.store.getDb()\n//db.once('compaction.done',testFN)\n\n//db.persistence.compactDatafile()\n\n//justShowResult(jColf(alldata,_co), 1)\nstr = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n\n","_id":"H9CT4kRrV3gbue20"}
{"key":"good_code_editor_14","source":"_ = require('underscore')\ncs = require('converter/store')\n\nshow = ()=> {\n  all = cs.store.getAll()\n  groups = _.groupBy(all,'status');\n  \n  groups = Object.keys(groups).map(k=>[k, groups[k].length]);\n  \n  //all = all.filter(v=>v.status=='error')\n  alldata = all.map(v=>{\n    let vo = _.omit(v, ['key','paths','_id','metadata']);\n    vo.docname = v.docname.slice(0,22);\n    //vo.metadata = van_dump(v.metadata).replace(/ /g, \"&nbsp;\");\n    return vo;\n  })\n  alldata = _.sortBy(alldata,'maxmem')\n  str = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length\n    ];\n  console.log(str)\n}\n\ncs.store.getDb().loadDatabase(show);\n\n","_id":"qoO0TfIqpTqN6DsB"}
{"key":"good_code_editor_0","source":"pd = \"/Users/rainerg/work/ideals\";\n\np = path.resolve(pd,\"_A\",\"log_errors_singapur_16286.csv\")\n\nstr = jetpack.read(p)\nlist = str.split('\\n')\n  .map(v=>v.trim())\n  .map(v=>v.split(';'))\nfirstRow = list.splice(0,1)[0];  \nlist = list.reduce((m,v)=>{\n  m.push(_.object(firstRow,v));\n  return m;\n},[])\n\n//jColf(list)\n//list.length\nlist","_id":"4CukdDx73iUKq9IQ"}
{"key":"good_code_editor_1","source":"pd = \"/Users/rainerg/work/ideals\";\np = path.resolve(pd,\"_stage_bugdocs\")\n\nfetchDoc = (v)=>(v.children)?\n  v.children.reduce((m,c)=>m.concat(fetchDoc(c)),[]):v\n\nlist = jetpack.inspectTree(p,{relativePath:true})\n\nlist = fetchDoc(list,'.')\n  .filter(v=>path.extname(v.name)=='.pdf')\n  .sort((a,b)=>a.size -b.size)\n/*\nlist = _.flatten(fetchDoc(list,pd))\n  \nlist = _.sortBy(list,'size')  \n\n*/\n//jColf(list)\n//list.length\n//\nlist//.map(v=>v.relativePath).map(path.parse)","_id":"9LPZyB6hcIUwyRSp"}
{"key":"good_code_editor_16","source":"csv = require('csv');\narrR = windowManager.sharedData.fetch('www1')\narrN = windowManager.sharedData.fetch('www1_names')\n\nshow = (err, data)=>{\n  clipboard.writeText(data)\n  justShowResult(data)\n}\ncolumns = [\n  \"id\",\n  \"name\",\n  \"ext\",\n  \"size\",\n  \"status\",\n  \"numPages\",\n  \"textsLen\",\n  \"blockLen\",\n  \"duration\",\n  \"maxmem\",\n  \"errmsg\"\n]\n\nindexN = _.indexBy(arrN,'Id')\n\narr = arrR.map(v=>{\n  let ndoc = indexN[v.docname];\n  return {\n    id: v.docname,\n    name: ndoc.Name,\n    ext: ndoc.Extension,\n    size: v.size,\n    status: v.status,\n    numPages: v.numPages,\n    textsLen: v.textsLen,\n    blockLen: v.blockLen,\n    duration: v.duration,\n    maxmem: v.maxmem,\n    errmsg: v.errmsg\n  }\n \n})\n\n//out = csv.stringify(arr,{columns,header:true,delimiter:';',quotedString:true},show)\n\n//clipboard.writeText(out)\n\n\njColf(arr)\n//arr","_id":"W515xDRfQzDtGIXK"}
{"key":"good_code_editor_17","source":"csv = require('csv');\np = \"/Users/rainerg/work/ideals/_A/VDR-16317/www1.csv\"\n\nshow = (err,data)=>{\n  window.data=data; \n  windowManager.sharedData.set('www1_names', data)\n  justShowResult(jColf(data),1)\n}\n\n\n\ncsv.parse(jetpack.read(p),{columns:true, delimiter:';'},show)\n//jetpack.read(p)\n//\n'ff'","_id":"bGvwLsxshm04IyTu"}
{"key":"good_code_editor_18","source":"timeout = 1000\ncs = require('converter/store')\n_co = {truncate:!true, preserveNewLines: !true};\n\nshow = ()=> {\n  all = cs.store.getAll()\n  groups = _.groupBy(all,'status');\n  \n  groups = Object.keys(groups).map(k=>[k, groups[k].length]);\n  \n  //all = all.filter(v=>v.status=='error')\n  alldata = all.map(v=>{\n    let vo = _.omit(v, ['key','paths','_id','metadata']);\n    vo.docname = v.docname.slice(0,22);\n    //vo.metadata = van_dump(v.metadata).replace(/ /g, \"&nbsp;\");\n    return vo;\n  })\n  alldata = _.sortBy(alldata,'size')\n  str = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n}\n\ncs.store.getDb().loadDatabase(show);\n//cs.store.getDb().updateIndexes()\n//testFN = function(){\n//  jLog('copacting done')\n//}\n\n//db = cs.store.getDb()\n//db.once('compaction.done',testFN)\n\n//db.persistence.compactDatafile()\n\n//justShowResult(jColf(alldata,_co), 1)\nstr = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n\n","_id":"ZSyuiyJoM1AJSfUs"}
{"key":"good_code_editor_32","source":"\ncw.setSheetOffset(0,400)\n//alert(1)\n\n\n\n\nString(cw.getNativeWindowHandle())\n\n\njustScale = (s=1)=>{\n  greatScale = s;\n  cw.webContents.setZoomFactor(greatScale);\n}\n\n_sy =function () {\n  //--------------?\n  display = remote.screen.getPrimaryDisplay().bounds;\n  //--------------?\n  var container = document.getElementById('editor');\n  var results = document.getElementById('result');\n  var composite = document.getElementById('composite');\n  var composite_wrap = document.getElementById('composite_wrap');\n  var totalWidth = 680;// container.offsetWidth;\n  var resultsHeight = results.offsetHeight;\n\n  if (resultsHeight >= 1000) {\n    resultsHeight = 1000;\n    results.onmousewheel = _scrl;\n\n  } else {\n    results.onmousewheel = false;\n  }\n\n  //console.log('si senior', composite.offsetHeight)\n\n  if (composite.offsetHeight >= 2500) {\n    composite_wrap.style.maxHeight = '900px';\n    //resultsHeight = 200;\n    composite_wrap.onmousewheel = _scrl;\n\n  } else {\n    composite_wrap.style.maxHeight = 'none';\n    composite_wrap.onmousewheel = false;\n  }\n\n  var upHeight = results.offsetTop - container.offsetHeight + 22;\n  //console.log(editor)\n  // var editorHeight = 8 + 16 * editor.lineCount();\n  var editorHeight = editor.getScrollInfo().height;\n\n  var totalHeight = editorHeight + upHeight + resultsHeight;\n\n  //editor.setSize(totalWidth, editorHeight);\n  //editor.refresh();\n  _currentEditorHeight = totalHeight;\n  remote.getCurrentWindow().setSize(totalWidth*greatScale|0, totalHeight*greatScale|0);\n\n  // var scrollerElement = editor.getScrollerElement();\n  // scrollerElement.style.width = containerWidth + 'px';\n  // scrollerElement.style.height = containerHeight + 'px';\n\n}\n\n_syd = _.debounce(_sy, 100);\n\n","_id":"ZRNJJRy0hZdTMlra"}
{"key":"good_code_editor_35","source":"\npd = \"/Users/rainerg/work/ideals\";\n\np = path.resolve(pd,\"_A\",\"log_errors_singapur_16286.csv\")\n\nstr = jetpack.read(p)\nlist = str.split('\\n')\n  .map(v=>v.trim())\n  .map(v=>v.split(';'))\nfirstRow = list.splice(0,1)[0];  \nlist = list.reduce((m,v)=>{\n  m.push(_.object(firstRow,v));\n  return m;\n},[])\n\n//jColf(list)\n//list.length\nlist\n\n","_id":"TDwy0I2HyWhbBuQx"}
{"key":"good_code_editor_matrix1","source":"cw.setBounds({\"x\": 830,\"y\": 60, \"width\": 500, \"height\": 350}, true);\ncw.setAlwaysOnTop(!true)\ntpl = jade.compileFile('./matrix/tpl.jade');\ntxt = tpl({name:'matrix_test_1'})\nsetContent(txt);\npreout = document.getElementById('preout');\nqcount = document.getElementById('qcount');\nfuncClass = {};\nif(typeof quants === 'undefined')quants = [];\n//quants = [];\n\ntestQuant = {\n  speed:{\n    x:1,\n    y:0\n  },\n  x:0,\n  y:5,\n  data:'ABC'\n};\n\nloadFunc = (e,docs)=>{\n\n  out = docs.map(d=>({key:d.key, source:d.source}))\n\n  funcClass = out.reduce((pv,cv,ci)=>{\n    pv[cv.key] = new Function('data', cv.source);\n    return pv;\n  },{})\n  windowManager.sharedData.set('funcClass', funcClass);  \n\n\n  fns = _.functions(funcClass).map(fname=>fname.split('y').reduce((memo, val)=>{\n    if(val.charAt(0)=='x'){\n      memo.x = 1*val.substr(1);\n    }else{\n      memo.y = 1*val}\n    return memo\n  },{name:fname, src: String(funcClass[fname])})) //!!!!!!!!\n\n  windowManager.sharedData.set('matrixFunc', fns);  \n\n  //preout.innerHTML = van_dump(fns);\n\n}\n\ncalculate = q => {\n  //console.log(q)\n  var qq = q;\n  Object.keys(q.speed).forEach(k=>q[k] += q.speed[k])\n  if(0==(qq.x = q.x%67))qq.y++;\n  //qq.y = qq.y%42\n\n  var fname = `x${q.x}y${q.y}`;\n\n  if(funcClass.hasOwnProperty(fname)){\n    funcClass[fname].apply(qq,[qq.data]);\n  }\n\n\n\n}\n\n//preout.innerHTML = van_dump(calculate(testQuant))\n\nstartrun = function(){\n  //funcClass = _.clone(windowManager.sharedData.fetch('funcClass'));\n  quants.forEach(calculate)\n  windowManager.sharedData.set('quants', quants);\n  preout.innerHTML = van_dump(quants);\n  qcount.innerHTML = quants.length;\n}\n\nif(typeof onlyOneLoop === 'undefined')onlyOneLoop = false;\n\nclrint = function(){\n  clearInterval(onlyOneLoop);\n}\nclrint();\n\nreset = function(){\n  Matrix.getDb().find({ key: { $exists: true } }).sort({key:1}).exec(loadFunc)\n  quants = [];\n}\n\nsettmr = function(){\n  tme = document.getElementById('mtimeout').selectedOptions[0].value;\n  clearInterval(onlyOneLoop);\n  onlyOneLoop = setInterval(startrun,tme);\n}\n\n//settmr();\n//startrun()\ndocument.getElementById('mquantadd').onclick = ()=>{\n  quants.push(JSON.parse(JSON.stringify(testQuant)));\n  //quants.push(_.extend(_.clone(testQuant), {x:3}));\n  windowManager.sharedData.set('quants', quants);\n}\ndocument.getElementById('mreload').onclick = reset;\ndocument.getElementById('mrun').onclick = settmr;\ndocument.getElementById('mstep').onclick = ()=>{clrint();startrun();};\n\ndocument.getElementById('mpause').onclick = clrint;\n\nmwname = 'matrix1_view';\ndocument.getElementById('mview').onclick = \n  ()=>giveWin(mwname).execute(`Knows.run('${mwname}')`);\n\n\n\n\n","_id":"YTQWAHA6rCEP4Z1u"}
{"key":"good_code_editor_39","source":"zerolist = DNO.open('zerolist');\n\nzerolist.find()\n  .then(jLog)\n\n","_id":"gyWYU2gi4KM8300z"}
{"key":"good_code_editor_46","source":"\nlet tpl = require('jade').compile(`\nhead\n  style \n    :stylus\n      body\n        background: #eee\n      .bar\n        width: 100%\n        height: 20px;\n        background: #ccc\n        -webkit-app-region: drag\nbody\n  .bar <-->\n  .wrap\n    #out.in\n      h1 ololoddddd\n`);\ndocument.write(tpl());\n\n\ndocument.getElementById('out').innerHTML += '<div>one more</div>'\ndocument.getElementById('out').innerHTML += '<div>and one more</div>'\n\n DNO.open('dno').run('test');\n DNO.open('dno').run('test');\n DNO.open('dno').run('test');\n DNO.open('dno').run('test');\n","_id":"ZiDrJydBAIb0vy4t"}
{"key":"good_code_editor_48","source":"\nlet txt = `<script>window._APP_ROOT = require('electron').remote.app.aspirinRoot;\nwindow.DNO = require(_APP_ROOT+'/system/dno');\nDNO.open('dno').run('go');</script>`;\ncreateWindow('test_win2',genDataHtmlUrl(txt))\n\n","_id":"YMdN28GEFGs252sQ"}
{"key":"good_code_editor_TILE_ALL_WINDOWS","source":"\nexw = [windowManager.getCurrent().name, \"ALL_WINDOW_SCROLL\", \"codeList\", \"showCodeList\", \"toolbar\", \"listknows\", \"showTime\", \"fulloverlay\"];\n\nwarr = _(remote.getGlobal('getAllWin')())\n  .chain()\n  .filter(w=>!exw.includes(w))\n  .map(w=>windowManager.get(w))\n  .filter(w=>!w.object.isAlwaysOnTop())\n  .sortBy(w=>w.object.id)\n  .value()\n\nчисло = 20;\n\nsss = 20;\n_x = 0;\nres = warr.map(function(wm,i){\n  //let [wx,wy] = w.object.getPosition();\n  //alert(w.name + i)\n  let w = wm.object;\n  let H = w.getSize()[1];\n  let top = w.isAlwaysOnTop();\n  \n  let Y = 10+sss;\n  let X = 560*_x;\n  let M = ( (H+sss) /900|0) ;\n  ret = [_x,sss,H,M];\n  if(H>1000){\n    _x++;\n    sss = 20;\n  }else if(M > 0 ){\n    //ret = [_x,sss];\n    _x++;\n    sss = 20;\n  }else{\n    sss += 90+H;\n  }\n  i++;\n  w.setAlwaysOnTop(true);\n  w.setVisibleOnAllWorkspaces(true);\n  w.focus();\n  w.webContents.executeJavaScript('justScale(.75)')\n  w.setPosition(X,Y,!true);\n  w.setAlwaysOnTop(top);\n  w.setVisibleOnAllWorkspaces(false);\n  return [ret,wm.name,w.getSize()[1]].join('  ');\n})\ncw.focus();\nres\n//justScale(.9)","_id":"7vlpaRLz4jGsJzv7"}
{"key":"good_code_editor_59","source":"\nDNO.open('tlen').rawData()\n\n\n","_id":"IPPq8rRzZWm7lhH7"}
{"key":"good_code_editor_31","source":"w = getWin('editor_32').object\n\ncode =()=>{\n  return `\njustScale = (s=1)=>{\n  greatScale = s;\n  cw.webContents.setZoomFactor(greatScale);\n}\n\n_sy =function () {\n  //--------------?\n  display = remote.screen.getPrimaryDisplay().bounds;\n  //--------------?\n  var container = document.getElementById('editor');\n  var results = document.getElementById('result');\n  var composite = document.getElementById('composite');\n  var composite_wrap = document.getElementById('composite_wrap');\n  var totalWidth = 680;// container.offsetWidth;\n  var resultsHeight = results.offsetHeight;\n\n  if (resultsHeight >= 1000) {\n    resultsHeight = 1000;\n    results.onmousewheel = _scrl;\n\n  } else {\n    results.onmousewheel = false;\n  }\n\n  //console.log('si senior', composite.offsetHeight)\n\n  if (composite.offsetHeight >= 2500) {\n    composite_wrap.style.maxHeight = '900px';\n    //resultsHeight = 200;\n    composite_wrap.onmousewheel = _scrl;\n\n  } else {\n    composite_wrap.style.maxHeight = 'none';\n    composite_wrap.onmousewheel = false;\n  }\n\n  var upHeight = results.offsetTop - container.offsetHeight + 22;\n  //console.log(editor)\n  // var editorHeight = 8 + 16 * editor.lineCount();\n  var editorHeight = editor.getScrollInfo().height;\n\n  var totalHeight = editorHeight + upHeight + resultsHeight;\n\n  //editor.setSize(totalWidth, editorHeight);\n  //editor.refresh();\n  _currentEditorHeight = totalHeight;\n  remote.getCurrentWindow().setSize(totalWidth*greatScale|0, totalHeight*greatScale|0);\n\n  // var scrollerElement = editor.getScrollerElement();\n  // scrollerElement.style.width = containerWidth + 'px';\n  // scrollerElement.style.height = containerHeight + 'px';\n\n}\n\n_syd = _.debounce(_sy, 100);\n`\n}\n\nwarr = _(remote.getGlobal('getAllWin')())\n  .chain()\n  .filter(w=>w[0]=='e')\n  .map(w=>windowManager.get(w))\n  //.filter(w=>!w.object.isAlwaysOnTop())\n  //.sortBy(w=>-w.object.getSize()[1])\n  .value()\n\n//warr.map(w=>w.object.webContents.executeJavaScript(code))\n//warr.map(w=>w.object.webContents.executeJavaScript('justScale(.7)'))\nwarr.map(w=>w.object.webContents.executeJavaScript(`DNO.open('tlen').save('good_code_${w.name}',editor.getValue())`))\n\nS = 1;\n\n//justScale(S)\n\nS","_id":"nypx3AwEK6HKmyxT"}
{"key":"good_code_editor_0","source":"pd = \"/Users/rainerg/work/ideals\";\n\np = path.resolve(pd,\"_A\",\"log_errors_singapur_16286.csv\")\n\nstr = jetpack.read(p)\nlist = str.split('\\n')\n  .map(v=>v.trim())\n  .map(v=>v.split(';'))\nfirstRow = list.splice(0,1)[0];  \nlist = list.reduce((m,v)=>{\n  m.push(_.object(firstRow,v));\n  return m;\n},[])\n\n//jColf(list)\n//list.length\nlist","_id":"4CukdDx73iUKq9IQ"}
{"key":"good_code_editor_1","source":"pd = \"/Users/rainerg/work/ideals\";\np = path.resolve(pd,\"_stage_bugdocs\")\n\nfetchDoc = (v)=>(v.children)?\n  v.children.reduce((m,c)=>m.concat(fetchDoc(c)),[]):v\n\nlist = jetpack.inspectTree(p,{relativePath:true})\n\nlist = fetchDoc(list,'.')\n  .filter(v=>path.extname(v.name)=='.pdf')\n  .sort((a,b)=>a.size -b.size)\n/*\nlist = _.flatten(fetchDoc(list,pd))\n  \nlist = _.sortBy(list,'size')  \n\n*/\n//jColf(list)\n//list.length\n//\nlist//.map(v=>v.relativePath).map(path.parse)","_id":"9LPZyB6hcIUwyRSp"}
{"key":"good_code_editor_3","source":"nedb = require('nedb')\nlet app = require('electron').remote.app\nmyDocumentsPath = app.getPath('documents')\ndbPath = path.resolve(myDocumentsPath, 'convertor_results_lab.db')\ndbPath = \"/Users/rainerg/work/ideals/5000_pdfs/converter_src/convertor_results_www1.db\"\ndb = new nedb({filename: dbPath, autoload: true})\n\n_co = {truncate:!true, preserveNewLines: !true};\n\nshow = ()=> {\n  all = db.getAllData();\n  groups = _.groupBy(all,'status');\n  \n  groups = Object.keys(groups).map(k=>[k, groups[k].length]);\n  \n  //all = all.filter(v=>v.status=='error')\n  alldata = all.map(v=>{\n    let vo = _.omit(v, ['key','paths','_id','metadata']);\n    vo.docname = v.docname.slice(0,22);\n    //vo.metadata = van_dump(v.metadata).replace(/ /g, \"&nbsp;\");\n    return vo;\n  })\n  alldata = _.sortBy(alldata,'docname')\n  str = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  //justShowResult(str, 1)\n  \n  justShowResult(str2)\n}\n\ndb.loadDatabase(show);\n\n//*\nstr = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n/**/\n//db.updateIndexes()\n//\n//nedb\n//db.getAllData()\n//dbPath","_id":"eJWR0ulYWLWSBgqo"}
{"key":"good_code_editor_5","source":"timeout = 1000\ncs = require('converter/store')\n_co = {truncate:!true, preserveNewLines: !true};\n\nshow = ()=> {\n  all = cs.store.getAll()\n  groups = _.groupBy(all,'status');\n  \n  groups = Object.keys(groups).map(k=>[k, groups[k].length]);\n  \n  //all = all.filter(v=>v.status=='error')\n  alldata = all.map(v=>{\n    let vo = _.omit(v, ['key','paths','_id','metadata']);\n    vo.docname = v.docname.slice(0,22);\n    //vo.metadata = van_dump(v.metadata).replace(/ /g, \"&nbsp;\");\n    return vo;\n  })\n  alldata = _.sortBy(alldata,'size')\n  str = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n}\n\ncs.store.getDb().loadDatabase(show);\n//cs.store.getDb().updateIndexes()\n//testFN = function(){\n//  jLog('copacting done')\n//}\n\n//db = cs.store.getDb()\n//db.once('compaction.done',testFN)\n\n//db.persistence.compactDatafile()\n\n//justShowResult(jColf(alldata,_co), 1)\nstr = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n\n","_id":"H9CT4kRrV3gbue20"}
{"key":"good_code_editor_14","source":"_ = require('underscore')\ncs = require('converter/store')\n\nshow = ()=> {\n  all = cs.store.getAll()\n  groups = _.groupBy(all,'status');\n  \n  groups = Object.keys(groups).map(k=>[k, groups[k].length]);\n  \n  //all = all.filter(v=>v.status=='error')\n  alldata = all.map(v=>{\n    let vo = _.omit(v, ['key','paths','_id','metadata']);\n    vo.docname = v.docname.slice(0,22);\n    //vo.metadata = van_dump(v.metadata).replace(/ /g, \"&nbsp;\");\n    return vo;\n  })\n  alldata = _.sortBy(alldata,'maxmem')\n  str = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length\n    ];\n  console.log(str)\n}\n\ncs.store.getDb().loadDatabase(show);\n\n","_id":"qoO0TfIqpTqN6DsB"}
{"key":"good_code_editor_16","source":"csv = require('csv');\narrR = windowManager.sharedData.fetch('www1')\narrN = windowManager.sharedData.fetch('www1_names')\n\nshow = (err, data)=>{\n  clipboard.writeText(data)\n  justShowResult(data)\n}\ncolumns = [\n  \"id\",\n  \"name\",\n  \"ext\",\n  \"size\",\n  \"status\",\n  \"numPages\",\n  \"textsLen\",\n  \"blockLen\",\n  \"duration\",\n  \"maxmem\",\n  \"errmsg\"\n]\n\nindexN = _.indexBy(arrN,'Id')\n\narr = arrR.map(v=>{\n  let ndoc = indexN[v.docname];\n  return {\n    id: v.docname,\n    name: ndoc.Name,\n    ext: ndoc.Extension,\n    size: v.size,\n    status: v.status,\n    numPages: v.numPages,\n    textsLen: v.textsLen,\n    blockLen: v.blockLen,\n    duration: v.duration,\n    maxmem: v.maxmem,\n    errmsg: v.errmsg\n  }\n \n})\n\n//out = csv.stringify(arr,{columns,header:true,delimiter:';',quotedString:true},show)\n\n//clipboard.writeText(out)\n\n\njColf(arr)\n//arr","_id":"W515xDRfQzDtGIXK"}
{"key":"good_code_editor_17","source":"csv = require('csv');\np = \"/Users/rainerg/work/ideals/_A/VDR-16317/www1.csv\"\n\nshow = (err,data)=>{\n  window.data=data; \n  windowManager.sharedData.set('www1_names', data)\n  justShowResult(jColf(data),1)\n}\n\n\n\ncsv.parse(jetpack.read(p),{columns:true, delimiter:';'},show)\n//jetpack.read(p)\n//\n'ff'","_id":"bGvwLsxshm04IyTu"}
{"key":"good_code_editor_18","source":"timeout = 1000\ncs = require('converter/store')\n_co = {truncate:!true, preserveNewLines: !true};\n\nshow = ()=> {\n  all = cs.store.getAll()\n  groups = _.groupBy(all,'status');\n  \n  groups = Object.keys(groups).map(k=>[k, groups[k].length]);\n  \n  //all = all.filter(v=>v.status=='error')\n  alldata = all.map(v=>{\n    let vo = _.omit(v, ['key','paths','_id','metadata']);\n    vo.docname = v.docname.slice(0,22);\n    //vo.metadata = van_dump(v.metadata).replace(/ /g, \"&nbsp;\");\n    return vo;\n  })\n  alldata = _.sortBy(alldata,'size')\n  str = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n}\n\ncs.store.getDb().loadDatabase(show);\n//cs.store.getDb().updateIndexes()\n//testFN = function(){\n//  jLog('copacting done')\n//}\n\n//db = cs.store.getDb()\n//db.once('compaction.done',testFN)\n\n//db.persistence.compactDatafile()\n\n//justShowResult(jColf(alldata,_co), 1)\nstr = [\n   // van_dump(groups),\n    groups.join('\\n'),\n    '',\n    alldata.length,\n    jColf(alldata,_co)\n    ].join('\\n');\n  justShowResult(str, 1)\n\n","_id":"ZSyuiyJoM1AJSfUs"}
{"key":"good_code_editor_32","source":"\ncw.setSheetOffset(0,400)\n//alert(1)\n\n\n\n\nString(cw.getNativeWindowHandle())\n\n\njustScale = (s=1)=>{\n  greatScale = s;\n  cw.webContents.setZoomFactor(greatScale);\n}\n\n_sy =function () {\n  //--------------?\n  display = remote.screen.getPrimaryDisplay().bounds;\n  //--------------?\n  var container = document.getElementById('editor');\n  var results = document.getElementById('result');\n  var composite = document.getElementById('composite');\n  var composite_wrap = document.getElementById('composite_wrap');\n  var totalWidth = 680;// container.offsetWidth;\n  var resultsHeight = results.offsetHeight;\n\n  if (resultsHeight >= 1000) {\n    resultsHeight = 1000;\n    results.onmousewheel = _scrl;\n\n  } else {\n    results.onmousewheel = false;\n  }\n\n  //console.log('si senior', composite.offsetHeight)\n\n  if (composite.offsetHeight >= 2500) {\n    composite_wrap.style.maxHeight = '900px';\n    //resultsHeight = 200;\n    composite_wrap.onmousewheel = _scrl;\n\n  } else {\n    composite_wrap.style.maxHeight = 'none';\n    composite_wrap.onmousewheel = false;\n  }\n\n  var upHeight = results.offsetTop - container.offsetHeight + 22;\n  //console.log(editor)\n  // var editorHeight = 8 + 16 * editor.lineCount();\n  var editorHeight = editor.getScrollInfo().height;\n\n  var totalHeight = editorHeight + upHeight + resultsHeight;\n\n  //editor.setSize(totalWidth, editorHeight);\n  //editor.refresh();\n  _currentEditorHeight = totalHeight;\n  remote.getCurrentWindow().setSize(totalWidth*greatScale|0, totalHeight*greatScale|0);\n\n  // var scrollerElement = editor.getScrollerElement();\n  // scrollerElement.style.width = containerWidth + 'px';\n  // scrollerElement.style.height = containerHeight + 'px';\n\n}\n\n_syd = _.debounce(_sy, 100);\n\n","_id":"ZRNJJRy0hZdTMlra"}
{"key":"good_code_editor_35","source":"\npd = \"/Users/rainerg/work/ideals\";\n\np = path.resolve(pd,\"_A\",\"log_errors_singapur_16286.csv\")\n\nstr = jetpack.read(p)\nlist = str.split('\\n')\n  .map(v=>v.trim())\n  .map(v=>v.split(';'))\nfirstRow = list.splice(0,1)[0];  \nlist = list.reduce((m,v)=>{\n  m.push(_.object(firstRow,v));\n  return m;\n},[])\n\n//jColf(list)\n//list.length\nlist\n\n","_id":"TDwy0I2HyWhbBuQx"}
{"key":"good_code_editor_matrix1","source":"cw.setBounds({\"x\": 830,\"y\": 60, \"width\": 500, \"height\": 350}, true);\ncw.setAlwaysOnTop(!true)\ntpl = jade.compileFile('./matrix/tpl.jade');\ntxt = tpl({name:'matrix_test_1'})\nsetContent(txt);\npreout = document.getElementById('preout');\nqcount = document.getElementById('qcount');\nfuncClass = {};\nif(typeof quants === 'undefined')quants = [];\n//quants = [];\n\ntestQuant = {\n  speed:{\n    x:1,\n    y:0\n  },\n  x:0,\n  y:5,\n  data:'ABC'\n};\n\nloadFunc = (e,docs)=>{\n\n  out = docs.map(d=>({key:d.key, source:d.source}))\n\n  funcClass = out.reduce((pv,cv,ci)=>{\n    pv[cv.key] = new Function('data', cv.source);\n    return pv;\n  },{})\n  windowManager.sharedData.set('funcClass', funcClass);  \n\n\n  fns = _.functions(funcClass).map(fname=>fname.split('y').reduce((memo, val)=>{\n    if(val.charAt(0)=='x'){\n      memo.x = 1*val.substr(1);\n    }else{\n      memo.y = 1*val}\n    return memo\n  },{name:fname, src: String(funcClass[fname])})) //!!!!!!!!\n\n  windowManager.sharedData.set('matrixFunc', fns);  \n\n  //preout.innerHTML = van_dump(fns);\n\n}\n\ncalculate = q => {\n  //console.log(q)\n  var qq = q;\n  Object.keys(q.speed).forEach(k=>q[k] += q.speed[k])\n  if(0==(qq.x = q.x%67))qq.y++;\n  //qq.y = qq.y%42\n\n  var fname = `x${q.x}y${q.y}`;\n\n  if(funcClass.hasOwnProperty(fname)){\n    funcClass[fname].apply(qq,[qq.data]);\n  }\n\n\n\n}\n\n//preout.innerHTML = van_dump(calculate(testQuant))\n\nstartrun = function(){\n  //funcClass = _.clone(windowManager.sharedData.fetch('funcClass'));\n  quants.forEach(calculate)\n  windowManager.sharedData.set('quants', quants);\n  preout.innerHTML = van_dump(quants);\n  qcount.innerHTML = quants.length;\n}\n\nif(typeof onlyOneLoop === 'undefined')onlyOneLoop = false;\n\nclrint = function(){\n  clearInterval(onlyOneLoop);\n}\nclrint();\n\nreset = function(){\n  Matrix.getDb().find({ key: { $exists: true } }).sort({key:1}).exec(loadFunc)\n  quants = [];\n}\n\nsettmr = function(){\n  tme = document.getElementById('mtimeout').selectedOptions[0].value;\n  clearInterval(onlyOneLoop);\n  onlyOneLoop = setInterval(startrun,tme);\n}\n\n//settmr();\n//startrun()\ndocument.getElementById('mquantadd').onclick = ()=>{\n  quants.push(JSON.parse(JSON.stringify(testQuant)));\n  //quants.push(_.extend(_.clone(testQuant), {x:3}));\n  windowManager.sharedData.set('quants', quants);\n}\ndocument.getElementById('mreload').onclick = reset;\ndocument.getElementById('mrun').onclick = settmr;\ndocument.getElementById('mstep').onclick = ()=>{clrint();startrun();};\n\ndocument.getElementById('mpause').onclick = clrint;\n\nmwname = 'matrix1_view';\ndocument.getElementById('mview').onclick = \n  ()=>giveWin(mwname).execute(`Knows.run('${mwname}')`);\n\n\n\n\n","_id":"YTQWAHA6rCEP4Z1u"}
{"key":"good_code_editor_39","source":"zerolist = DNO.open('zerolist');\n\nzerolist.find()\n  .then(jLog)\n\n","_id":"gyWYU2gi4KM8300z"}
{"key":"good_code_editor_46","source":"\nlet tpl = require('jade').compile(`\nhead\n  style \n    :stylus\n      body\n        background: #eee\n      .bar\n        width: 100%\n        height: 20px;\n        background: #ccc\n        -webkit-app-region: drag\nbody\n  .bar <-->\n  .wrap\n    #out.in\n      h1 ololoddddd\n`);\ndocument.write(tpl());\n\n\ndocument.getElementById('out').innerHTML += '<div>one more</div>'\ndocument.getElementById('out').innerHTML += '<div>and one more</div>'\n\n DNO.open('dno').run('test');\n DNO.open('dno').run('test');\n DNO.open('dno').run('test');\n DNO.open('dno').run('test');\n","_id":"ZiDrJydBAIb0vy4t"}
{"key":"good_code_editor_48","source":"\nlet txt = `<script>window._APP_ROOT = require('electron').remote.app.aspirinRoot;\nwindow.DNO = require(_APP_ROOT+'/system/dno');\nDNO.open('dno').run('go');</script>`;\ncreateWindow('test_win2',genDataHtmlUrl(txt))\n\n","_id":"YMdN28GEFGs252sQ"}
{"key":"good_code_editor_TILE_ALL_WINDOWS","source":"\nexw = [windowManager.getCurrent().name, \"ALL_WINDOW_SCROLL\", \"codeList\", \"showCodeList\", \"toolbar\", \"listknows\", \"showTime\", \"fulloverlay\"];\n\nwarr = _(remote.getGlobal('getAllWin')())\n  .chain()\n  .filter(w=>!exw.includes(w))\n  .map(w=>windowManager.get(w))\n  .filter(w=>!w.object.isAlwaysOnTop())\n  .sortBy(w=>w.object.id)\n  .value()\n\nчисло = 20;\n\nsss = 20;\n_x = 0;\nres = warr.map(function(wm,i){\n  //let [wx,wy] = w.object.getPosition();\n  //alert(w.name + i)\n  let w = wm.object;\n  let H = w.getSize()[1];\n  let top = w.isAlwaysOnTop();\n  \n  let Y = 10+sss;\n  let X = 560*_x;\n  let M = ( (H+sss) /900|0) ;\n  ret = [_x,sss,H,M];\n  if(H>1000){\n    _x++;\n    sss = 20;\n  }else if(M > 0 ){\n    //ret = [_x,sss];\n    _x++;\n    sss = 20;\n  }else{\n    sss += 90+H;\n  }\n  i++;\n  w.setAlwaysOnTop(true);\n  w.setVisibleOnAllWorkspaces(true);\n  w.focus();\n  w.webContents.executeJavaScript('justScale(.75)')\n  w.setPosition(X,Y,!true);\n  w.setAlwaysOnTop(top);\n  w.setVisibleOnAllWorkspaces(false);\n  return [ret,wm.name,w.getSize()[1]].join('  ');\n})\ncw.focus();\nres\n//justScale(.9)","_id":"7vlpaRLz4jGsJzv7"}
{"key":"good_code_editor_59","source":"\nout = DNO.open('tlen').rawData()\n  .map(v=>v.key.big()+'\\n<code>'+v.source+'</code>')\n  .join('\\n')\n\njustShowResult(out, true)\n","_id":"IPPq8rRzZWm7lhH7"}
{"key":"good_code_editor_31","source":"w = getWin('editor_32').object\n\ncode =()=>{\n  return `\njustScale = (s=1)=>{\n  greatScale = s;\n  cw.webContents.setZoomFactor(greatScale);\n}\n\n_sy =function () {\n  //--------------?\n  display = remote.screen.getPrimaryDisplay().bounds;\n  //--------------?\n  var container = document.getElementById('editor');\n  var results = document.getElementById('result');\n  var composite = document.getElementById('composite');\n  var composite_wrap = document.getElementById('composite_wrap');\n  var totalWidth = 680;// container.offsetWidth;\n  var resultsHeight = results.offsetHeight;\n\n  if (resultsHeight >= 1000) {\n    resultsHeight = 1000;\n    results.onmousewheel = _scrl;\n\n  } else {\n    results.onmousewheel = false;\n  }\n\n  //console.log('si senior', composite.offsetHeight)\n\n  if (composite.offsetHeight >= 2500) {\n    composite_wrap.style.maxHeight = '900px';\n    //resultsHeight = 200;\n    composite_wrap.onmousewheel = _scrl;\n\n  } else {\n    composite_wrap.style.maxHeight = 'none';\n    composite_wrap.onmousewheel = false;\n  }\n\n  var upHeight = results.offsetTop - container.offsetHeight + 22;\n  //console.log(editor)\n  // var editorHeight = 8 + 16 * editor.lineCount();\n  var editorHeight = editor.getScrollInfo().height;\n\n  var totalHeight = editorHeight + upHeight + resultsHeight;\n\n  //editor.setSize(totalWidth, editorHeight);\n  //editor.refresh();\n  _currentEditorHeight = totalHeight;\n  remote.getCurrentWindow().setSize(totalWidth*greatScale|0, totalHeight*greatScale|0);\n\n  // var scrollerElement = editor.getScrollerElement();\n  // scrollerElement.style.width = containerWidth + 'px';\n  // scrollerElement.style.height = containerHeight + 'px';\n\n}\n\n_syd = _.debounce(_sy, 100);\n`\n}\n\nwarr = _(remote.getGlobal('getAllWin')())\n  .chain()\n  .filter(w=>w[0]=='e')\n  .map(w=>windowManager.get(w))\n  //.filter(w=>!w.object.isAlwaysOnTop())\n  //.sortBy(w=>-w.object.getSize()[1])\n  .value()\n\n//warr.map(w=>w.object.webContents.executeJavaScript(code))\n//warr.map(w=>w.object.webContents.executeJavaScript('justScale(.7)'))\nwarr.map(w=>w.object.webContents.executeJavaScript(`DNO.open('tlen').save('good_code_${w.name}',editor.getValue())`))\n\nS = 1;\n\n//justScale(S)\n\nS","_id":"nypx3AwEK6HKmyxT"}
