{"key":"bbb","source":"jukukij","_id":"7IWKXDvyjKcQTAYq"}
{"key":"go2","source":"new Promise((resolve, reject)=>{\nlet tpl = require('jade').compile(`\nhead\n  style \n    :stylus\n      body\n        background: #eee\n      .bar\n        width: 100%\n        height: 20px;\n        background: #ccc\n        -webkit-app-region: drag\nbody\n  .bar <-->\n  .wrap\n    #out.in\n      h1 ASKA v02\n`);\ndocument.write(tpl());\ndocument.getElementById('out').innerHTML += '<div>GitHub Link to Download</div>'\ndocument.getElementById('out').innerHTML += '<div>Все права защищены</div>'\n//DNO.open('dno').run('test');\n/*\nlet magic =()=>{\n  return DNO.open('dno').run('print_text').then(printFn=>{\n    DNO.open('dno').run('input')\n      .then(printFn)\n      .then(resolve);\n  })\n}\n\nmagic();\n*/\n  \n})","_id":"NhuNWdvHz1sPeAQt"}
{"key":"win1","source":"\nlet txt = `<script>window._APP_ROOT = require('electron').remote.app.aspirinRoot;\nwindow.DNO = require(_APP_ROOT+'/system/dno');\nDNO.open('dno').run('go');</script>`;\ncreateWindow('test_win3',genDataHtmlUrl(txt))\n\n","_id":"PwjFfiApgAM0hs6g"}
{"key":"win0","source":"getWin('editor_46').execute(`DNO.open('dno').save('go',editor.getValue());`)\ngetWin('editor_47').execute(`DNO.open('dno').save('test',editor.getValue());`)\ngetWin('editor_48').execute(`DNO.open('dno').save('win1',editor.getValue());`)\n\nwname = 'test_win';\n\nurl = genDataHtmlUrl('<html/>')\n\nwin = getWin(wname);\nif(!win) win = createWindow('test_win',url)//oldwin.close();\n\nwin.loadURL(url)\ncode = `\nwindow._APP_ROOT = require('electron').remote.app.aspirinRoot;\nwindow.DNO = require(_APP_ROOT+'/system/dno');\nDNO.open('dno').run('go');\n`;\nwin.execute(code)\n","_id":"V7JfEpFpfeYIs2VX"}
{"key":"test","source":"\ndocument.getElementById('out').innerHTML += '<div>_APP_ROOT='+_APP_ROOT+'</div>'\n\n","_id":"bh41vtktwcOPcOTj"}
{"key":"print_text","source":"\nvar fn = function (val){\n  //alert('do '+val); \n  return new Promise((resolve, reject)=>{\n    //alert('oxyeval'+val);\ndocument.body.innerHTML += '<div style=\"color:red;\">resolved: '+val+' </div>'\n    resolve(val)\n  })\n}\nPromise.resolve(fn);  ","_id":"d42wVjjzTSSlJHnR"}
{"key":"go","source":"\nlet tpl = require('jade').compile(`\n   \nhead\n  style \n    :stylus\n      body\n        background: #eee\n      .bar\n        -webkit-app-region: drag\nbody\n  .bar <-->\n  .wrap\n    #out.in\n      h1 ASKA v03\n\nmixin btn(text,icon)\n    .btn.btn-large.btn-default&attributes(attributes)\n        span.icon(class!=\"icon-#{icon}\")\n        | #{text}\nstyle\n    :stylus\n        .title\n            font-size: 20px\n\n        .large-font\n            select.btn\n                height: 33px\n            .btn\n                font-size: 14px\n            span.icon\n                color: black\n                font-size: 15px\n                margin-right: 2px\n.toolbar\n    h1.title #{name}\n    .toolbar-actions\n        .large-font.btb-group\n            +btn('!','menu')#mview\n            +btn('!','plus')#mquantadd\n            +btn('!','cw')(class=\"btn-primary\")#mreload\n            .pull-right\n                span.icon.icon-text#qcount -\n                select.btn.btn-default#mtimeout\n                    option 0\n                    option 50\n                    option(selected) 200\n                    option 500\n                    option 1000\n                +btn('run','play')(class=\"btn-warning\")#mrun\n                +btn('step','to-end')#mstep\n                +btn('pause','pause')(class=\"btn-positive\")#mpause\n\npre#preout\n`);\ndocument.write(tpl());\n\n\ndocument.getElementById('out').innerHTML += '<div>GitHub Link to Download</div>'\ndocument.getElementById('out').innerHTML += '<div>Все права защищены</div>'\nocument.getElementById('toolbar').innerHTML += '<div>Все права защищены</div>'\n//DNO.open('dno').run('test');\nDNO.open('dno').run('win1_inp')\n  .then(v=>magic(v))\n  .then(v=>document.body.innerHTML += '<div>'+v+'</div>');\n//*\nlet magic =(vvv)=>{\n  return DNO.open('dno').run('print_text').then(printFn=>{\n    return Promise.resolve(vvv)\n      .then(printFn)\n      .then(DNO.open('dno').run('win1_inp')\n  .then(v=>magic(v))\n  .then(v=>document.body.innerHTML += '<div>'+v+'</div>'));\n  })\n}\n\n//magic();\n\n/**/\n\n","_id":"jJasLmw2w452B02p"}
{"key":"aaa","source":"ccc","_id":"mGocFRPWYdmZ6850"}
{"key":"input","source":"//DNO.open('dno').run(\nnew Promise((resolve,reject)=>{\n  window.submit = ()=>{\n    let val = document.getElementById('inp').value//.trim();\n    if(val)\n      resolve(val);\n  }\n  \n  document.body.innerHTML \n  += `<div>\n<input id=\"inp\" type=\"text\" value=\"sample\"></input>\n<button onclick=\"submit()\"></button>\n</div>`;\n  })\n","_id":"q7lOCXwIjMmW0lT6"}
{"key":"win1_inp","source":"function genDataHtmlUrl(content){\n  return \"data:text/html;charset=utf-8,\" + encodeURI(content);\n}\nfunction createWindow(name, url){\n  let {BrowserWindow} = require('electron').remote;\n  let gw = new BrowserWindow({\n    enableLargerThanScreen: true,\n    movable: true,\n    alwaysOnTop: true,\n    transparent: !true,\n    resizable: true,\n    skipTaskbar: true,\n    frame: false ,\n    center: true,\n    show: false\n  });\n  //gw.on('closed', function() {\n  //  gw = null;\n  //});\n  gw.loadURL(url);\n\n  //gw.webContents.once('did-finish-load',function() {\n   gw.setSize(300,300)\n   gw.setPosition(800,50)\n    gw.showInactive();\n\n  //});\n  return gw;\n}\n\n//let fn = (val)=>{\nlet txt = `<script>window._APP_ROOT = 'F:\\\\\\\\ajr\\\\\\\\aspirin';\nwindow.DNO = require(_APP_ROOT+'\\\\\\\\system\\\\\\\\dno');\n</script>`;\nlet win = createWindow('test_win1_inp', genDataHtmlUrl(txt));\n\nnew Promise((resolve,reject)=>{\n  let code = `DNO.open('dno').run('go2');`;\n  //let code = `Promise.resolve(DNO.open('dno').run('go2'));`;\n  win.webContents.once('did-finish-load',function() {\n    win.webContents.executeJavaScript(code, (v)=>resolve(v))\n  })\n})\n  .then(v=>{\n  //alert(v)\n  win.close();\n  return v;\n  })\n//}\nPromise.resolve(fn());","_id":"rfYtVlt1xuFMesnf"}
{"key":"ccc","source":"jukukij","_id":"tLzC6Fou41N4iNN9"}
{"key":"edit","source":"\nDNO.open('dno').findOne({key:just.name})\n  .then(v=>editor.setValue(v.source))\n\n","_id":"xQeO9UayqAvvdDcC"}
